<?php $getViewSet = $block->getViewSet(); if($getViewSet == 1){ $ViewSet = 1; }else{ $ViewSet = 2; } $sortingType = "Recommended"; $categories = $block->getCategoryCollection(true, false, 'name', false); $brandAttributes = $block->getAllBrand(); array_shift($brandAttributes); $sizeAttributes = $block->getAllSizes(); array_shift($sizeAttributes); $brandsAttr = array(); $sizeAttr = array(); foreach ($brandAttributes as $value) { $brandsAttr[$value->getValue()] = $value->getLabel(); } foreach ($sizeAttributes as $value) { $sizeAttr[$value->getValue()] = $value->getLabel(); } $category_id_array = $block->getAllChildren(true,$block->getCurrentCategory()->getEntity_id()); $productlist = $block->getProductCollection($category_id_array); $currentUrl = $block->getUrl('*/*/*', array('_use_rewrite' => true, '_forced_secure' => true)); $objectManager = \Magento\Framework\App\ObjectManager::getInstance(); $repository = $objectManager->create('Magento\Catalog\Model\ProductRepository'); ?> <main class="main"><div class="loading-mask" style="display:none; position:fixed !important;" data-role="loader" ><div class="loader"><img alt="Loading..." src="<?php echo $block->getViewFileUrl('images/loader-2.gif') ?>"><p>Please wait...</p></div></div><section class="listingPageBanner d-none d-md-block"><div class="container"><h1><?php echo $block->getCurrentCategory()->getName() ?></h1></div></section><section class="singlePageHead"><div class="outerContainer"><div class="container"><div class="row"><div class="col-md-12"><nav aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="<?php echo $block->getBaseUrl(); ?>">Home</a></li> <li class="breadcrumb-item active" aria-current="page"><?php echo $block->getCurrentCategory()->getName() ?></li></ol></nav><!-- <div class="headWrap"><h3>Men - tshirts</h3></div> --></div></div></div></div></section><section class="productListing"><div class="outerContainer"><div class="container"><div class="row"><div class="col-md-4 col-lg-3 d-none d-md-block"><div class="filterWrap"><div class="topHead"><h6>Filter</h6></div><form id="productFilters"><input type="hidden" id="orderType" name="orderType"/><div class="filters"><div class="filter_box filterOpen"><div class="filterHead d-flex align-items-center justify-content-between"><h6>Categories</h6><svg width="16" height="8" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.90333 5.83906C5.68323 6.05365 5.32899 6.05365 5.12131 5.83906L0.183332 1.03663C-0.0611106 0.798303 -0.0611106 0.417074 0.183332 0.178746C0.427774 -0.0595822 0.818784 -0.0595822 1.06323 0.178746L5.10899 4.12331C5.32909 4.3379 5.68333 4.3379 5.89101 4.12331L9.93677 0.178746C10.1812 -0.0595822 10.5722 -0.0595822 10.8167 0.178746C11.0611 0.417074 11.0611 0.798303 10.8167 1.03663L5.90333 5.83906Z" fill="#151515" /></svg></div><div class="wrap"><?php foreach ($categories as $category) { ?> <div class="form-group"><label class="checkUnCheck"><input type="checkbox" class="brandsAttr" id="<?php $textid = substr($category->getName(),0,2).'_'.$category->getId(); echo $textid; ?>" value="<?php echo $category->getId(); ?>" name="categories[]" <?php if($block->getCurrentCategory()->getName() == $category->getName()) echo "checked "; ?>><span class="checkUnCheckBox"></span> <span class="checkUnCheckText" id="filters_<?php echo $textid; ?>"><?php echo $category->getName();?></span></label></div><?php } ?></div></div><div class="filter_box"><div class="filterHead d-flex align-items-center justify-content-between"><h6>Brands</h6><svg width="16" height="8" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.90333 5.83906C5.68323 6.05365 5.32899 6.05365 5.12131 5.83906L0.183332 1.03663C-0.0611106 0.798303 -0.0611106 0.417074 0.183332 0.178746C0.427774 -0.0595822 0.818784 -0.0595822 1.06323 0.178746L5.10899 4.12331C5.32909 4.3379 5.68333 4.3379 5.89101 4.12331L9.93677 0.178746C10.1812 -0.0595822 10.5722 -0.0595822 10.8167 0.178746C11.0611 0.417074 11.0611 0.798303 10.8167 1.03663L5.90333 5.83906Z" fill="#151515" /></svg></div><div class="wrap"><?php if(!empty($brandsAttr)){ foreach($brandsAttr as $key => $attributes) { ?> <div class="form-group"><label class="checkUnCheck"><input type="checkbox" class="brandsAttr" name="brand[]" id="<?php $textid = substr($attributes,0,2).'_'.$key; echo $textid; ?>" value="<?php echo $key; ?>" /><span class="checkUnCheckBox"></span> <span class="checkUnCheckText" id="filters_<?php echo $textid; ?>"><?php echo $attributes; ?></span></label></div><?php } } ?></div></div><div class="filter_box"><div class="filterHead d-flex align-items-center justify-content-between"><h6>Sizes</h6><svg width="16" height="8" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.90333 5.83906C5.68323 6.05365 5.32899 6.05365 5.12131 5.83906L0.183332 1.03663C-0.0611106 0.798303 -0.0611106 0.417074 0.183332 0.178746C0.427774 -0.0595822 0.818784 -0.0595822 1.06323 0.178746L5.10899 4.12331C5.32909 4.3379 5.68333 4.3379 5.89101 4.12331L9.93677 0.178746C10.1812 -0.0595822 10.5722 -0.0595822 10.8167 0.178746C11.0611 0.417074 11.0611 0.798303 10.8167 1.03663L5.90333 5.83906Z" fill="#151515" /></svg></div><div class="wrap"><?php if(!empty($sizeAttr)){ foreach($sizeAttr as $key => $attributes) { ?> <div class="form-group"><label class="checkUnCheck"><input type="checkbox" class="brandsAttr" name="size[]" id="<?php $textid = substr($attributes,0,2).'_'.$key; echo $textid; ?>" value="<?php echo $key; ?>" /><span class="checkUnCheckBox"></span> <span class="checkUnCheckText" id="filters_<?php echo $textid; ?>"><?php echo $attributes; ?></span></label></div><?php } } ?></div></div><div class="filter_box"><div class="filterHead d-flex align-items-center justify-content-between"><h6>Price</h6><svg width="16" height="8" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.90333 5.83906C5.68323 6.05365 5.32899 6.05365 5.12131 5.83906L0.183332 1.03663C-0.0611106 0.798303 -0.0611106 0.417074 0.183332 0.178746C0.427774 -0.0595822 0.818784 -0.0595822 1.06323 0.178746L5.10899 4.12331C5.32909 4.3379 5.68333 4.3379 5.89101 4.12331L9.93677 0.178746C10.1812 -0.0595822 10.5722 -0.0595822 10.8167 0.178746C11.0611 0.417074 11.0611 0.798303 10.8167 1.03663L5.90333 5.83906Z" fill="#151515" /></svg></div><div class="wrap"><div class="form-group"><label class="checkUnCheck"><input type="checkbox" name="priceRange[]" class="brandsAttr" id="10-20-price" value="1_20" /><span class="checkUnCheckBox"></span> <span class="checkUnCheckText" id="filters_10-20-price">$10 - $20</span></label></div><div class="form-group"><label class="checkUnCheck"><input type="checkbox" name="priceRange[]" class="brandsAttr" id="21_50_price" value="21_50" /><span class="checkUnCheckBox"></span> <span class="checkUnCheckText" id="filters_21_50_price">$21 - $50</span></label></div><div class="form-group"><label class="checkUnCheck"><input type="checkbox" name="priceRange[]" class="brandsAttr" id="51_100_price" value="51_100"/><span class="checkUnCheckBox"></span> <span class="checkUnCheckText" id="filters_51_100_price">$51 - $100</span></label></div><div class="form-group"><label class="checkUnCheck"><input type="checkbox" name="priceRange[]" class="brandsAttr" id="101_500_price" value="101_500"/><span class="checkUnCheckBox"></span> <span class="checkUnCheckText" id="filters_101_500_price">$101 - $500</span></label></div><div class="form-group"><label class="checkUnCheck"><input type="checkbox" name="priceRange[]" class="brandsAttr" id="500_gt_price" value="500_gt"/><span class="checkUnCheckBox"></span> <span class="checkUnCheckText" id="filters_500_gt_price">$501 & above</span></label></div></div></div><!-- <div class="filter_box"> --><!-- <div class="wrap quantityDropdown"> --><!-- <div class="tab-content" id="myTabContent"> --></form></div></div></div><div class="col-md-8 col-lg-9"><div class="filteredProduct"><div class="d-none topWrap d-md-flex align-items-center justify-content-between"><!-- <a href="" id="clearAll" style="display: none">Clear all</a> --><div class="btnWrap d-flex align-items-center ml-auto"><div class="listView listingViews <?php if($ViewSet ==1){echo "selected";} ?>" id="listView"><svg width="22" height="21" viewBox="0 0 22 21" fill="none" stroke="#151515" xmlns="http://www.w3.org/2000/svg"><line x1="0.5" y1="0.5" x2="21.5" y2="0.5" stroke-linecap="round" /><line x1="0.5" y1="20.5" x2="21.5" y2="20.5" stroke-linecap="round" /><line x1="0.5" y1="10.5" x2="11.5" y2="10.5" stroke-linecap="round" /></svg></div><div class="gridView listingViews <?php if($ViewSet !=1){echo "selected";} ?>" id="gridView"><svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 0H22V10H12V0ZM22 12H12V22H22V12ZM0 12H10V22H0V12ZM10 0H0V10H10V0Z" fill="#151515" /></svg></div><div class="dropdown"><button class="btn btn-secondary dropdown-toggle d-flex align-items-center" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> Sort by: <strong id="sortingActive"><?php echo $sortingType?></strong></button> <div class="dropdown-menu" aria-labelledby="dropdownMenuButton"><a class="dropdown-item sorting" href="javascript:void(0)" id="Recomended" data-type="recomended">Recommended</a> <a class="dropdown-item sorting" href="javascript:void(0)" data-id="Default" data-type="default">Default</a> <a class="dropdown-item sorting" href="javascript:void(0)" data-id="What's New" data-type="new">What's New</a> <!-- <a class="dropdown-item sorting" href="javascript:void(0)" data-type="mostviewd" data-id="Popularity">Popularity</a> --><a class="dropdown-item sorting" href="javascript:void(0)" data-type="lowtohigh" data-id="Price low to high">Price low to high</a> <a class="dropdown-item sorting" href="javascript:void(0)" data-type="hightolow" data-id="Price high to low">Price high to low</a> <!-- <a class="dropdown-item" href="<?=$currentUrl.'?product_list_order=name'?>">Default</a> <a class="dropdown-item sorting" href="<?=$currentUrl.'?product_list_order=mostviewd'?>" id="Popularity">Popularity</a> <a class="dropdown-item sorting" href="<?=$currentUrl.'?product_list_order=price&order_wise=asc'?>" id="Price low to high">Price low to high</a> <a class="dropdown-item sorting" href="<?=$currentUrl.'?product_list_order=price&order_wise=desc'?>" id="Price high to low">Price high to low</a> --></div></div></div></div><div class="tagsWrap d-none d-md-block" id="filtersName"></div><div class="d-md-none filteredProductActionMobile"><button>Filter</button> <button>Sort by</button></div><div class="similarProduct <?php if($ViewSet ==1){echo "list_view";} ?>"><div class="productWrap"><div class="row" id="ajaxresponse"><?php $defaultSize = ["Small" => "S", "Medium" => "M", "Large" => "L", "Xtra Large" =>"XL", "2X Large" => "XXL", "One Size" => "OS"]; foreach ( $productlist as $product){ $size_array = ''; $childrenIds = $product->getTypeInstance()->getChildrenIds($product->getId()); if (!empty($childrenIds[0])) { $currentId = reset($childrenIds[0]); $productCollection = $objectManager->create('Magento\Catalog\Model\ResourceModel\Product\Collection'); $collection = $productCollection->addAttributeToSelect('color')->groupByAttribute('color')->addIdFilter($childrenIds)->load(); $swatchHelper=$objectManager->get("Magento\Swatches\Helper\Media"); $colorArray = []; foreach ($collection as $simg) { $getId = $simg->getColor(); array_push($colorArray, $getId); } $data = $product->getTypeInstance()->getConfigurableOptions($product); $_children = $product->getTypeInstance()->getUsedProducts($product); if(!empty($_children)){ foreach ($_children as $child){ $pricingArr[] = ($child->getPrice()); } $configurablePrice = number_format(min($pricingArr), 2); } $options = array(); foreach($data as $attr){ foreach($attr as $p){ $options[$p['sku']][$p['attribute_code']] = $p['option_title']; } } if(!empty($options)){ foreach($options as $sku =>$d){ $pr = $repository->get($sku); if(!empty($d['size']) && !empty($colorArray[0]) &&$pr->getColor() == $colorArray[0]){ if (!empty($size_array)) { $size_array .= ', '.$defaultSize[$d['size']]; } else { $size_array .= $defaultSize[$d['size']]; } } } } } ?> <div class="col-sm-6 col-lg-4"><div class="product"><div class="productTop"><div class="productImgSlider"><?php foreach($block->getAllProductImages($product->getId()) as $images){ ?> <a href="<?php echo $product->getProductUrl(); ?>"><div class="productTopImg" style="background-image: url(<?php echo $images['url'];?>);"><!-- <img class="productFeaturedBatch" src="<?php echo $this->getViewFileUrl('images/productFeaturedBatch.png'); ?>" alt="productFeaturedBatch" /> --><div class="productFeaturedBatch d-flex align-items-center justify-content-center"><span>Featured</span></div></div></a> <?php } ?></div><?php if ($size_array) { ?> <div class="productTopOver"><h6>Available sizes</h6><!-- <div><span class="text-orange">s</span>, m, l , xl, 2xl, 3xl</div> --><div><?=$size_array?></div></div><?php } ?></div><div class="productContent"><div class="prodInfo"><div class="topWrap d-flex align-items-center justify-content-between"><a href="<?php echo $product->getProductUrl(); ?>"><h6><?php echo $product->getName(); ?></h6></a></div><p><?php echo $product->getShortDescription(); ?></p><div class="productContentWishListBottom"><button class="productContentWishList"><svg width="24" height="21" viewBox="0 0 24 21" fill="#C7452A" stroke="#C7452A" stroke-width="0.2" xmlns="http://www.w3.org/2000/svg"><path d="M15.1614 18.1119L15.1606 18.1125C14.3849 18.7736 13.5061 19.5226 12.5947 20.3195C12.335 20.5469 12.0018 20.6721 11.6562 20.6721C11.3108 20.6721 10.9774 20.5469 10.7179 20.3198C9.80441 19.521 8.92427 18.7708 8.14715 18.1088L8.14714 18.1087L8.14082 18.1034C5.87182 16.1696 3.9028 14.4916 2.53088 12.8361C0.992397 10.9798 0.269085 9.21039 0.269085 7.27252C0.269085 5.39493 0.912827 3.65876 2.08622 2.38597C3.27396 1.09774 4.90435 0.388281 6.67521 0.388281C8.00089 0.388281 9.21568 0.807881 10.2833 1.63354C10.7881 2.02391 11.2475 2.49563 11.6562 3.0413C12.0648 2.49562 12.5244 2.0239 13.029 1.63355L13.029 1.63355C14.0966 0.807881 15.3114 0.388281 16.6371 0.388281C18.4081 0.388281 20.0383 1.09774 21.2261 2.38596L21.2261 2.38597C22.3994 3.65875 23.0434 5.39492 23.0434 7.27252C23.0434 9.21039 22.3199 10.9798 20.7814 12.8363L20.7044 12.7724L20.7814 12.8363C19.4091 14.492 17.4392 16.1707 15.1691 18.1053L15.1654 18.1084L15.1646 18.1091L15.1614 18.1119ZM19.6094 11.8649L19.6864 11.9287L19.6094 11.8649C20.9371 10.2628 21.5212 8.84857 21.5212 7.27252C21.5212 5.77284 21.017 4.40496 20.107 3.41781C19.2108 2.44595 17.9793 1.91065 16.6371 1.91065C15.6566 1.91065 14.7567 2.2219 13.9603 2.83769C13.2488 3.38797 12.7515 4.08538 12.4591 4.5755L12.4591 4.57553C12.2888 4.86079 11.9882 5.03159 11.6562 5.03159C11.3242 5.03159 11.0236 4.86079 10.8534 4.57553L10.9392 4.52427L10.8534 4.57553C10.5608 4.08538 10.0635 3.38797 9.35211 2.83769C8.55572 2.2219 7.65588 1.91065 6.67521 1.91065C5.33313 1.91065 4.10147 2.44596 3.20549 3.4178C2.29544 4.40495 1.79128 5.77283 1.79128 7.27252C1.79128 8.84857 2.37531 10.2628 3.70291 11.8649C4.9894 13.4173 6.90505 15.05 9.13455 16.9502C9.8962 17.599 10.7572 18.3329 11.658 19.1166C12.5536 18.3344 13.4132 17.6017 14.1732 16.954L14.1741 16.9533L14.1774 16.9505C14.1775 16.9504 14.1776 16.9503 14.1777 16.9502C16.4072 15.0502 18.3229 13.4172 19.6094 11.8649Z" /></svg></button></div></div><?php $objectManager = \Magento\Framework\App\ObjectManager::getInstance(); $listBlock = $objectManager->get('\Magento\Catalog\Block\Product\ListProduct'); $addToCartUrl = $listBlock->getAddToCartUrl($product); ?> <div class="price"><!-- <strike>$64.89</strike> --><?php $getFinalPrice = (!empty($configurablePrice)) ? $configurablePrice : number_format($product->getFinalPrice(), 2); ?> <strong>$<?php echo $getFinalPrice;?></strong> <b class="discount"><!-- (20% off) --></b> <form data-role="tocart-form" action="<?php echo $addToCartUrl; ?>" method="post"><?php echo $block->getBlockHtml('formkey')?> <button type="submit" title="Add to Cart" class="addCart btn btn-primary align-items-center"><svg class="mr-3" width="36" height="32" viewBox="0 0 36 32" fill="#fff" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M35.2058 5.04483H7.03708L6.54164 3.01168C6.11374 1.23806 4.53526 -0.00748155 2.72607 3.38254e-05H0.793708C0.355381 3.38254e-05 0 0.358515 0 0.800919C0 1.24307 0.355381 1.60155 0.793708 1.60155H2.72607C3.80265 1.59278 4.74412 2.33229 4.99992 3.38745L8.85422 19.2651C9.28435 21.0352 10.8641 22.2752 12.6705 22.2612H29.1576C30.9894 22.276 32.5835 21.0011 32.9873 19.1992L35.9799 6.00504C36.034 5.77056 35.9776 5.52406 35.8269 5.33693C35.6752 5.14879 35.4464 5.04107 35.2058 5.04483ZM31.4399 18.8473C31.198 19.9187 30.2471 20.674 29.1576 20.6597H12.6705C11.5954 20.6715 10.6535 19.9352 10.3967 18.8821L7.42549 6.64635H34.2097L31.4399 18.8473ZM25.7252 24.8467C23.767 24.8467 22.1794 26.4477 22.1794 28.423C22.1794 30.3987 23.7665 32 25.7247 32C27.6834 32 29.2706 30.3987 29.2706 28.4235C29.2689 26.4487 27.6824 24.8487 25.7252 24.8467ZM25.7252 30.3985C24.6434 30.3985 23.767 29.5142 23.767 28.4235C23.767 27.3325 24.6434 26.4482 25.7247 26.4482C26.8065 26.4477 27.6829 27.3325 27.6829 28.423C27.6817 29.5134 26.806 30.3967 25.7252 30.3985ZM11.4418 28.423C11.4418 26.4477 13.0295 24.8467 14.9878 24.8467C16.9452 24.8487 18.5317 26.4487 18.5334 28.4235C18.5334 30.3987 16.946 32 14.9875 32C13.0293 32 11.4418 30.3987 11.4418 28.423ZM13.0295 28.4235C13.0295 29.5142 13.9062 30.3985 14.9878 30.3985C16.0686 30.3967 16.9445 29.5134 16.9457 28.423C16.9457 27.3325 16.0691 26.4477 14.9875 26.4482C13.9062 26.4482 13.0295 27.3325 13.0295 28.4235Z" /></svg> Add to cart</button></form></div></div></div></div><?php } ?></div></div></div></div><!-- <div class="pagination d-flex align-items-center"><span class="currentPage"> Page 1 of 1</span> <ul class="list-unstyled d-flex mx-auto"><li> <svg width="5" height="9" viewBox="0 0 5 9" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.42097 3.68885e-05C4.74883 3.69028e-05 4.99982 0.28492 4.99981 0.611199C4.99981 0.774334 4.94178 0.937477 4.82646 1.03934L1.41145 4.50259L4.82646 7.96584C5.05785 8.21014 5.05785 8.5977 4.82646 8.8213C4.61391 9.04572 4.26722 9.0656 4.03506 8.84199L0.17607 4.95052C-0.0553152 4.7261 -0.0553157 4.33936 0.156473 4.09506L0.17607 4.07437L4.03506 0.163136C4.13153 0.0612753 4.26645 -3.20647e-08 4.42096 -2.53107e-08L4.42097 3.68885e-05Z" fill="#151515" /></svg></li> <li class="active">1</li> <li>2</li> <li>3</li> <li>4</li> <li>5</li> <li> <svg width="5" height="9" viewBox="0 0 5 9" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0.579033 8.99996C0.251174 8.99996 0.00018497 8.71508 0.000184956 8.3888C0.000184949 8.22567 0.0582205 8.06252 0.173539 7.96066L3.58855 4.49741L0.173538 1.03416C-0.0578466 0.789862 -0.0578466 0.402305 0.173538 0.178701C0.386092 -0.0457173 0.732783 -0.0656014 0.96494 0.15801L4.82393 4.04948C5.05531 4.2739 5.05532 4.66064 4.84353 4.90494L4.82393 4.92563L0.96494 8.83686C0.868465 8.93872 0.733555 9 0.579041 9L0.579033 8.99996Z" fill="#151515" /></svg></li></ul><div class="showPages d-flex align-items-center"><span>Show</span> <div class="dropdown"><button class="btn btn-secondary dropdown-toggle d-flex align-items-center" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> 15</button> <div class="dropdown-menu" aria-labelledby="dropdownMenuButton"><a class="dropdown-item " href="#">5</a> <a class="dropdown-item " href="#">1</a> <a class="dropdown-item active" href="#">15</a> <a class="dropdown-item" href="#">20</a> <a class="dropdown-item" href="#">50</a></div></div></div></div> --></div></div></div></div></section><section class="discountBar"><div class="outerContainer"><div class="container"><div class="row"><div class="col-md-12"><h3 class="discountText text-center text-white"> 20% discount for early bird, register your now!</h3></div></div></div></div></section></main><script>
require([ 'jquery'], function($){ 
$(document).ready(function() {
   
    $(".brandsAttr").on('click',function(){
        $(".loading-mask").show();       
        var id = this.id;
        var text = $('#filters_'+id).text();
        var filterDiv = '<span class="'+id+'">'+text+'<svg class="remove" width="11" height="12" viewBox="0 0 11 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M0.165764 11.3344C0.275859 11.4453 0.420765 11.5004 0.56567 11.5004C0.710438 11.5004 0.855343 11.4446 0.966267 11.3344L5.50042 6.80023L10.0349 11.3344C10.1452 11.4453 10.2899 11.5004 10.4349 11.5004C10.5789 11.5004 10.7237 11.4446 10.8346 11.3344C11.0556 11.1134 11.0556 10.755 10.8346 10.534L6.30066 5.99999L10.8346 1.46602C11.0556 1.24487 11.0556 0.886539 10.8346 0.66552C10.6136 0.444501 10.2553 0.444501 10.0343 0.66552L5.50023 5.19955L0.966267 0.66552C0.74511 0.444501 0.386783 0.444501 0.165764 0.66552C-0.0552547 0.886539 -0.0552547 1.24487 0.165764 1.46602L4.69995 5.99983L0.165764 10.534C-0.0552547 10.755 -0.0552547 11.1134 0.165764 11.3344Z" fill="#BDBDBD" /></svg></span>';
        $('#clearAll').css('display', 'block');
        if($(this).prop("checked") == true){
            $('#filtersName').append(filterDiv);
        }else{
             $('.'+id).remove();
        }
        ajaxFilter();
    });

    function ajaxFilter(){
        jQuery.ajax({
            url: "<?php echo $this->getUrl().'layered/product/filter'?>",
            type: "POST",
            data: $('#productFilters').serialize(),
            success: function(response){
                $('#ajaxresponse').html(response.output);
                $(".loading-mask").hide();
                
                
            }
        });
    }

    $('.sorting').click(function(){
        $(".loading-mask").show();
        $("#orderType").val($(this).attr('data-type'));
        $('#sortingActive').html($(this).attr('data-id'));
        
        ajaxFilter();
    });

    $('.listingViews').click(function(){
        getId = this.id;

        if(getId == 'listView'){
            setSession =1;
        }else if(getId == 'gridView'){
            setSession = 2;
        }

        jQuery.ajax({
            url: "<?php echo $this->getUrl().'products/check/view'?>",
            type: "POST",
            data: {setSession:setSession},
            success: function(response){
                if(response.output == true){
                    console.log(response);    
                }
            }
        });

    })
    
    
    
    
    
    


    
    
    
    
    
    



    $(document).on('click','.remove',function(){
        $(".loading-mask").show();
        var filterId = $(this).parent('span').attr('class');
       
        $('.'+filterId).remove();
        $("#"+filterId).prop('checked', false);
        ajaxFilter();

    });

    <?php foreach ($categories as $category) {
          if($block->getCurrentCategory()->getName() == $category->getName()) {
              ?> text = '<?=$category->getName()?>';
              textid = '<?=substr($category->getName(),0,2)?>';
              id = textid+'_'+<?=$category->getId()?>;
             var filterDiv = '<span class="'+id+'">'+text+'<svg class="remove" width="11" height="12" viewBox="0 0 11 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M0.165764 11.3344C0.275859 11.4453 0.420765 11.5004 0.56567 11.5004C0.710438 11.5004 0.855343 11.4446 0.966267 11.3344L5.50042 6.80023L10.0349 11.3344C10.1452 11.4453 10.2899 11.5004 10.4349 11.5004C10.5789 11.5004 10.7237 11.4446 10.8346 11.3344C11.0556 11.1134 11.0556 10.755 10.8346 10.534L6.30066 5.99999L10.8346 1.46602C11.0556 1.24487 11.0556 0.886539 10.8346 0.66552C10.6136 0.444501 10.2553 0.444501 10.0343 0.66552L5.50023 5.19955L0.966267 0.66552C0.74511 0.444501 0.386783 0.444501 0.165764 0.66552C-0.0552547 0.886539 -0.0552547 1.24487 0.165764 1.46602L4.69995 5.99983L0.165764 10.534C-0.0552547 10.755 -0.0552547 11.1134 0.165764 11.3344Z" fill="#BDBDBD" /></svg></span>';
            $('#clearAll').css('display', 'block');
            $('#filtersName').append(filterDiv);
            return;
      <?php
          }
      }   
      ?> });
});</script>