<?php use Magento\Framework\App\Bootstrap; $bootstrap = Bootstrap::create(BP, $_SERVER); $obj = $bootstrap->getObjectManager(); $state = $obj->get('Magento\Framework\App\State'); $state->setAreaCode('frontend'); $objectManager = \Magento\Framework\App\ObjectManager::getInstance(); $storeManager = $objectManager->get('Magento\Store\Model\StoreManagerInterface'); $currencyCode = $storeManager->getStore()->getCurrentCurrencyCode(); $currency = $objectManager->create('Magento\Directory\Model\CurrencyFactory')->create()->load($currencyCode); $currencySymbol = $currency->getCurrencySymbol(); $repository = $objectManager->create('Magento\Catalog\Model\ProductRepository'); $mediaPath = $objectManager->get('Magento\Store\Model\StoreManagerInterface') ->getStore() ->getBaseUrl(\Magento\Framework\UrlInterface::URL_TYPE_MEDIA); $product = $block->getLoadProduct(); $getCordinates = $block->getCordinates($product->getId()); if(!empty($getCordinates)){ $loopImages = $getCordinates; }else{ $loopImages = $block->getAllProductImages(); } $size_array = array(); if($block->getProductType() == 'configurable'){ $childrenIds = $product->getTypeInstance()->getChildrenIds($product->getId()); $currentId = reset($childrenIds[0]); $productCollection = $objectManager->create('Magento\Catalog\Model\ResourceModel\Product\Collection'); $collection = $productCollection->addAttributeToSelect('color')->groupByAttribute('color')->addIdFilter($childrenIds)->load(); $swatchHelper=$objectManager->get("Magento\Swatches\Helper\Media"); $colorArray = []; foreach ($collection as $simg) { $getId = $simg->getColor(); array_push($colorArray, $getId); } $data = $product->getTypeInstance()->getConfigurableOptions($product); $_children = $product->getTypeInstance()->getUsedProducts($product); if(!empty($_children)){ foreach ($_children as $child){ $pricingArr[] = ($child->getPrice()); } $configurablePrice = number_format(min($pricingArr), 2); } $options = array(); $size_array = array(); foreach($data as $attr){ foreach($attr as $p){ $options[$p['sku']][$p['attribute_code']] = $p['option_title']; } } if(!empty($options)){ foreach($options as $sku =>$d){ $pr = $repository->get($sku); if(!empty($d['size'])){ $size_array[] = array("size"=>$d['size'],"price"=>$pr->getPrice(),"id" => $pr->getId()); } } } } if (empty($size_array)) { $sizeval = $product->getResource()->getAttribute('size')->getFrontend()->getValue($product); $size_array[] = array("size"=>$sizeval,"price"=>$product->getPrice(),"id" => $product->getId()); } $productid = (isset($currentId))?$currentId:$product->getId(); $currentProduct = $objectManager->get('Magento\Catalog\Api\ProductRepositoryInterface')->getById($productid); if(!empty($block->getTierPrice())){ $tier_price = $block->getTierPrice(); } else { $tier_price = $currentProduct->getTierPrice(); } if(!empty($product->getRelatedProducts())){ $relatedProducts = $product->getRelatedProducts(); }else{ $relatedProducts = ''; } if(!empty($block->getCurrentCategory())){ $getCurrentCategory = $block->getCurrentCategory()->getData()['name']; }else{ $getCurrentCategory = ""; } $wishlistHelper = $objectManager->get('Magento\Wishlist\Helper\Data'); $checkWishlist = $wishlistHelper->getWishlistItemCollection(); $checkList = false; foreach ($checkWishlist as $_wishlist_item){ if($product->getId() == $_wishlist_item->getProduct()->getId()){ $checkList = true; break; } } $customerSession = $objectManager->create('Magento\Customer\Model\Session'); $customerId = $customerSession->getId(); ?> <main class="main"><section class="singlePageHead"><div class="outerContainer"><div class="container"><div class="row"><div class="col-md-12"><nav aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="<?php echo $block->getBaseUrl(); ?>">home</a></li> <li class="breadcrumb-item"><?php echo $getCurrentCategory;?></li></ol></nav></div></div></div></div></section><section class="productDetail"><div class="outerContainer"><div class="container"><div class="row"><div class="col-md-6"><div class="productImage"><div class="row"><div class="col-lg-2 d-none d-lg-block"><!-- <img src="images/product/product1_1.jpg" alt="" class="img-fluid"><img src="images/product/product1_2.jpg" alt="" class="img-fluid"><img src="images/product/product1_3.jpg" alt="" class="img-fluid"><img src="images/product/product1_4.jpg" alt="" class="img-fluid"> --><div class="productImgSliderNav"><?php if(!empty($loopImages)) { $count = 1; foreach($loopImages as $images){ ?> <div class="productImgSliderNavItem sideImagesCode"><img src="<?php echo $images['url'];?>" id="getSide_<?php echo $count; ?>" data-side ="<?php echo $images['url'];?>" class="img-fluid sideImages" data-top="<?php if(!empty($images['top_crdnt'])) { echo $images['top_crdnt'];}else{echo "";}?>" data-left="<?php if(!empty($images['left_crdnt'])) { echo $images['left_crdnt'];}else{echo "";}?>" data-sides="<?php if(!empty($images['side'])) { echo $images['side'];}else{echo "";}?>" data-height="<?php if(!empty($images['height'])) { echo $images['height'];}else{echo "";}?>" data-width="<?php if(!empty($images['width'])) { echo $images['width'];}else{echo "";}?>"/></div><?php $count ++ ; } }?></div></div><div class="col-md-10"><div class="productDetailImgSlider"><?php ?> <div class="productImgSliderNavItem slider-img-wrap"><!-- <img src="<?php data-target="#productImageModal"/> --><canvas id="loadingCanvas" data-image = "<?php echo $block->getProductImgById($product->getId())?>" width="500" height="550" style="width:100%;object-fit:cover;margin: 0 auto;max-width: 100%;" class="img-fluid"><!-- <canvas id="inner" height="143" width="46"></canvas> --></canvas><input type="hidden" id="bgImgWidth"><input type="hidden" id="bgImgHeight"><input type="hidden" id="data_left"><input type="hidden" id="data_top"><input type="hidden" id="data_width"><input type="hidden" id="data_height"><!-- <canvas id="innerCanvas"></canvas> --><!-- <button class="btn btn-primary d-flex align-items-center save-design" id="saveTheDesign"> Save this design</button> --></div><?php ?> <!-- <div class="slider-img-wrap"><button class="btn btn-primary d-flex align-items-center save-design" id="saveTheDesign"> Save this design</button></div> --></div><?php if($checkList){?> <!-- <a href="javascript:void(0)" data-post='<?php ?>' class="action towishlist addedToWishList" data-action="add-to-wishlist"> --><a href="javascript:void(0)" class="action towishlist addedToWishList" data-id="<?=$customerId.'-'.$product->getId()?>" data-action="add-to-wishlist"><button class="productWishlistBtn"><svg width="31" height="27" viewBox="0 0 24 21" fill="#C7452A" stroke="#C7452A" stroke-width="0.2" xmlns="http://www.w3.org/2000/svg"><path d="M15.1614 18.1119L15.1606 18.1125C14.3849 18.7736 13.5061 19.5226 12.5947 20.3195C12.335 20.5469 12.0018 20.6721 11.6562 20.6721C11.3108 20.6721 10.9774 20.5469 10.7179 20.3198C9.80441 19.521 8.92427 18.7708 8.14715 18.1088L8.14714 18.1087L8.14082 18.1034C5.87182 16.1696 3.9028 14.4916 2.53088 12.8361C0.992397 10.9798 0.269085 9.21039 0.269085 7.27252C0.269085 5.39493 0.912827 3.65876 2.08622 2.38597C3.27396 1.09774 4.90435 0.388281 6.67521 0.388281C8.00089 0.388281 9.21568 0.807881 10.2833 1.63354C10.7881 2.02391 11.2475 2.49563 11.6562 3.0413C12.0648 2.49562 12.5244 2.0239 13.029 1.63355L13.029 1.63355C14.0966 0.807881 15.3114 0.388281 16.6371 0.388281C18.4081 0.388281 20.0383 1.09774 21.2261 2.38596L21.2261 2.38597C22.3994 3.65875 23.0434 5.39492 23.0434 7.27252C23.0434 9.21039 22.3199 10.9798 20.7814 12.8363L20.7044 12.7724L20.7814 12.8363C19.4091 14.492 17.4392 16.1707 15.1691 18.1053L15.1654 18.1084L15.1646 18.1091L15.1614 18.1119ZM19.6094 11.8649L19.6864 11.9287L19.6094 11.8649C20.9371 10.2628 21.5212 8.84857 21.5212 7.27252C21.5212 5.77284 21.017 4.40496 20.107 3.41781C19.2108 2.44595 17.9793 1.91065 16.6371 1.91065C15.6566 1.91065 14.7567 2.2219 13.9603 2.83769C13.2488 3.38797 12.7515 4.08538 12.4591 4.5755L12.4591 4.57553C12.2888 4.86079 11.9882 5.03159 11.6562 5.03159C11.3242 5.03159 11.0236 4.86079 10.8534 4.57553L10.9392 4.52427L10.8534 4.57553C10.5608 4.08538 10.0635 3.38797 9.35211 2.83769C8.55572 2.2219 7.65588 1.91065 6.67521 1.91065C5.33313 1.91065 4.10147 2.44596 3.20549 3.4178C2.29544 4.40495 1.79128 5.77283 1.79128 7.27252C1.79128 8.84857 2.37531 10.2628 3.70291 11.8649C4.9894 13.4173 6.90505 15.05 9.13455 16.9502C9.8962 17.599 10.7572 18.3329 11.658 19.1166C12.5536 18.3344 13.4132 17.6017 14.1732 16.954L14.1741 16.9533L14.1774 16.9505C14.1775 16.9504 14.1776 16.9503 14.1777 16.9502C16.4072 15.0502 18.3229 13.4172 19.6094 11.8649Z" /></svg></button></a> <?php }else{?> <a href="" data-post='<?php echo $this->helper('Magento\Wishlist\Helper\Data')->getAddParams($product) ?>' class="action towishlist" data-action="add-to-wishlist"><button class="productWishlistBtn"><svg width="31" height="27" viewBox="0 0 31 27" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M24.7877 16.7959C22.5255 19.4195 19.1212 22.2997 16.4379 24.2056C16.058 24.4744 15.5604 24.4842 15.171 24.2299C12.4136 22.4359 8.90106 19.698 6.54365 17.1717C4.52974 15.0116 1.86883 11.7422 2.00529 8.28666C2.1194 5.34443 4.32623 2.36692 8.32112 2.36692C8.39876 2.36692 8.47522 2.36814 8.55286 2.37057C11.5443 2.45693 13.7794 5.58161 13.7959 5.60593L14.4817 6.59844C14.9687 7.30268 15.9886 7.282 16.4485 6.5583L17.0955 5.53782C17.1167 5.5062 19.2306 2.29638 22.2091 2.08717C22.3914 2.07501 22.5726 2.06893 22.7502 2.06893C26.551 2.06893 28.7602 4.91751 28.9802 7.73203C29.2484 11.1802 26.7157 14.5567 24.7877 16.7959ZM30.9741 7.5654C30.6588 3.53579 27.458 0 22.7502 0C22.5279 0 22.302 0.00851411 22.0727 0.0255423C18.7942 0.254207 16.4673 2.97994 15.6992 4.01136C15.5545 4.20476 15.2839 4.21084 15.1322 4.02231C14.324 3.02373 11.896 0.398947 8.60932 0.301643C8.51286 0.29921 8.4164 0.29921 8.32112 0.29921C3.39809 0.29921 0.169008 4.05028 0.00667155 8.20395C-0.158018 12.3832 2.75933 16.0929 5.1038 18.6058C8.2223 21.9482 12.8665 25.3185 15.6721 26.9508C15.7909 27.0189 15.9239 27.0165 16.0403 26.9423C18.7836 25.1969 23.2925 21.638 26.2816 18.1715C28.5261 15.5626 31.2976 11.7385 30.9741 7.5654Z" fill="black"></path></svg></button></a> <?php } ?> <!-- <a href="" data-post='<?php ?>' class="action towishlist" data-action="add-to-wishlist"><button class="productContentWishList"><svg width="24" height="21" viewBox="0 0 24 21" fill="#C7452A" stroke="#C7452A" stroke-width="0.2" xmlns="http://www.w3.org/2000/svg"><path d="M15.1614 18.1119L15.1606 18.1125C14.3849 18.7736 13.5061 19.5226 12.5947 20.3195C12.335 20.5469 12.0018 20.6721 11.6562 20.6721C11.3108 20.6721 10.9774 20.5469 10.7179 20.3198C9.80441 19.521 8.92427 18.7708 8.14715 18.1088L8.14714 18.1087L8.14082 18.1034C5.87182 16.1696 3.9028 14.4916 2.53088 12.8361C0.992397 10.9798 0.269085 9.21039 0.269085 7.27252C0.269085 5.39493 0.912827 3.65876 2.08622 2.38597C3.27396 1.09774 4.90435 0.388281 6.67521 0.388281C8.00089 0.388281 9.21568 0.807881 10.2833 1.63354C10.7881 2.02391 11.2475 2.49563 11.6562 3.0413C12.0648 2.49562 12.5244 2.0239 13.029 1.63355L13.029 1.63355C14.0966 0.807881 15.3114 0.388281 16.6371 0.388281C18.4081 0.388281 20.0383 1.09774 21.2261 2.38596L21.2261 2.38597C22.3994 3.65875 23.0434 5.39492 23.0434 7.27252C23.0434 9.21039 22.3199 10.9798 20.7814 12.8363L20.7044 12.7724L20.7814 12.8363C19.4091 14.492 17.4392 16.1707 15.1691 18.1053L15.1654 18.1084L15.1646 18.1091L15.1614 18.1119ZM19.6094 11.8649L19.6864 11.9287L19.6094 11.8649C20.9371 10.2628 21.5212 8.84857 21.5212 7.27252C21.5212 5.77284 21.017 4.40496 20.107 3.41781C19.2108 2.44595 17.9793 1.91065 16.6371 1.91065C15.6566 1.91065 14.7567 2.2219 13.9603 2.83769C13.2488 3.38797 12.7515 4.08538 12.4591 4.5755L12.4591 4.57553C12.2888 4.86079 11.9882 5.03159 11.6562 5.03159C11.3242 5.03159 11.0236 4.86079 10.8534 4.57553L10.9392 4.52427L10.8534 4.57553C10.5608 4.08538 10.0635 3.38797 9.35211 2.83769C8.55572 2.2219 7.65588 1.91065 6.67521 1.91065C5.33313 1.91065 4.10147 2.44596 3.20549 3.4178C2.29544 4.40495 1.79128 5.77283 1.79128 7.27252C1.79128 8.84857 2.37531 10.2628 3.70291 11.8649C4.9894 13.4173 6.90505 15.05 9.13455 16.9502C9.8962 17.599 10.7572 18.3329 11.658 19.1166C12.5536 18.3344 13.4132 17.6017 14.1732 16.954L14.1741 16.9533L14.1774 16.9505C14.1775 16.9504 14.1776 16.9503 14.1777 16.9502C16.4072 15.0502 18.3229 13.4172 19.6094 11.8649Z" /></svg></button></a> --></div></div><div class="productImageContent"><h6>Bundle pricing</h6><table class="table"><thead><tr><th>Min Quantity</th><th>Max Quantity</th><th>Price</th><?php if(!empty($tier_price[0]['percentage_value'])){?> <th>Discount</th><?php }?></tr></thead><tbody id="bundle-price"><?php if(!empty($tier_price)){ $min = round(min(array_column($tier_price, 'price_qty'))); ?> <input value="<?=$min?>" id="tierMinPrice" type="hidden"/><?php for ($j=0; $j<count($tier_price); $j++) { ?> <tr><td><?=round($tier_price[$j]['price_qty'])?></td><td><? $maxqty = (!empty($tier_price[$j+1]['price_qty']))?round($tier_price[$j+1]['price_qty'] - 1):'+'; echo $maxqty;?></td><td><?php echo number_format($tier_price[$j]['price'], 2)?></td><?php if (!empty($tier_price[$j]['percentage_value']) && $tier_price[$j]['percentage_value'] > 0){?> <td><?=round($tier_price[$j]['percentage_value']).'%'?></td><?php } ?></tr><!-- <tr><?php ?> <td><b><?php ?></b></td><?php ?> <?php ?> <td><span><?php ?></span></td><td><span><?php ?></span></td><?php ?> <?php ?> <td><?php ?></td></tr> --><?php } } ?></tbody></table></div></div></div><div class="col-md-6"><div class="contentWrap"><div class="productInfo d-flex flex-column"><div class="heading d-flex align-items-center "><h4><?php echo $block->getProductName(); ?></h4></div><span class="subhead"><?php echo $block ->getShortDescription(); ?></span> <!-- <a href="#" class="custom">customize this design</a> --><!-- <div class="content"><p> Mauris eget consectetur eget bibendum. Nunc am et nisi feugiat nam nunc feugiat tempor. Arcu, habitasse venenatis sit proin. Tristique vulputate quam quisque at. <span class="more">more details +</span></p></div> --><div class="shareProduct"><button class="shareProductBtn"><svg class="shareProductBtnShare" width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M19.8571 39.2143C30.5478 39.2143 39.2143 30.5478 39.2143 19.8571C39.2143 9.16649 30.5478 0.5 19.8571 0.5C9.16649 0.5 0.5 9.16649 0.5 19.8571C0.5 30.5478 9.16649 39.2143 19.8571 39.2143Z" fill="white" stroke="black" /><path d="M23.0984 23.7677C22.3644 23.7677 21.6713 24.0529 21.1412 24.4602L16.6968 21.5681C16.8599 21.1608 16.9822 20.7535 16.9822 20.3054C16.9822 19.8981 16.9006 19.4907 16.7375 19.1241L21.2228 15.9062C21.7528 16.3135 22.4052 16.5579 23.0984 16.5579C24.8109 16.5579 26.1565 15.173 26.1565 13.503C26.1565 11.7922 24.7702 10.448 23.0984 10.448C21.4266 10.448 20.0403 11.8329 20.0403 13.503C20.0403 13.8696 20.1218 14.1954 20.2034 14.5213L15.6366 17.7799C15.1473 17.4541 14.5357 17.2504 13.8833 17.2504C12.1708 17.2504 10.8252 18.6353 10.8252 20.3054C10.8252 22.0162 12.2115 23.3604 13.8833 23.3604C14.4949 23.3604 15.0658 23.1975 15.5551 22.8716L20.2034 25.8859C20.1218 26.171 20.0403 26.4968 20.0403 26.8227C20.0403 28.5335 21.4266 29.8777 23.0984 29.8777C24.7702 29.8777 26.1565 28.4928 26.1565 26.8227C26.1565 25.1527 24.7702 23.7677 23.0984 23.7677Z" fill="#151515" /></svg><svg class="shareProductBtnCross" width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M19.8571 39.2143C30.5478 39.2143 39.2143 30.5478 39.2143 19.8571C39.2143 9.16649 30.5478 0.5 19.8571 0.5C9.16649 0.5 0.5 9.16649 0.5 19.8571C0.5 30.5478 9.16649 39.2143 19.8571 39.2143Z" fill="white" stroke="black" /><path fill-rule="evenodd" clip-rule="evenodd" d="M25.4468 15.1539C25.6421 14.9587 25.6421 14.6421 25.4468 14.4468C25.2516 14.2516 24.935 14.2516 24.7397 14.4468L19.5486 19.6379L14.8089 14.8982C14.6137 14.7029 14.2971 14.7029 14.1018 14.8982C13.9066 15.0934 13.9066 15.41 14.1018 15.6053L18.8415 20.345L14.1331 25.0534C13.9379 25.2487 13.9379 25.5653 14.1331 25.7605C14.3284 25.9558 14.645 25.9558 14.8402 25.7605L19.5486 21.0521L24.308 25.8114C24.5032 26.0067 24.8198 26.0067 25.0151 25.8114C25.2103 25.6162 25.2103 25.2996 25.0151 25.1043L20.2558 20.345L25.4468 15.1539Z" fill="#151515" /><path d="M25.4468 14.4468L25.0933 14.8004L25.4468 14.4468ZM19.5486 19.6379L19.1951 19.9915L19.5486 20.345L19.9022 19.9915L19.5486 19.6379ZM14.1018 15.6053L13.7483 15.9588L14.1018 15.6053ZM18.8415 20.345L19.1951 20.6986L19.5486 20.345L19.1951 19.9915L18.8415 20.345ZM14.1331 25.0534L13.7796 24.6999L14.1331 25.0534ZM19.5486 21.0521L19.9022 20.6986L19.5486 20.345L19.1951 20.6986L19.5486 21.0521ZM25.0151 25.1043L25.3686 24.7508L25.0151 25.1043ZM20.2558 20.345L19.9022 19.9915L19.5486 20.345L19.9022 20.6986L20.2558 20.345ZM25.0933 14.8004L25.8004 15.5075C26.1909 15.117 26.1909 14.4838 25.8004 14.0933L25.0933 14.8004ZM25.0933 14.8004L25.0933 14.8004L25.8004 14.0933C25.4099 13.7028 24.7767 13.7028 24.3862 14.0933L25.0933 14.8004ZM19.9022 19.9915L25.0933 14.8004L24.3862 14.0933L19.1951 19.2844L19.9022 19.9915ZM14.4554 15.2517L19.1951 19.9915L19.9022 19.2844L15.1625 14.5446L14.4554 15.2517ZM14.4554 15.2517L15.1625 14.5446C14.7719 14.1541 14.1388 14.1541 13.7483 14.5446L14.4554 15.2517ZM14.4554 15.2517L13.7483 14.5446C13.3577 14.9352 13.3577 15.5683 13.7483 15.9588L14.4554 15.2517ZM19.1951 19.9915L14.4554 15.2517L13.7483 15.9588L18.488 20.6986L19.1951 19.9915ZM14.4867 25.407L19.1951 20.6986L18.488 19.9915L13.7796 24.6999L14.4867 25.407ZM14.4867 25.407L14.4867 25.407L13.7796 24.6999C13.3891 25.0904 13.389 25.7236 13.7796 26.1141L14.4867 25.407ZM14.4867 25.407L14.4867 25.407L13.7796 26.1141C14.1701 26.5046 14.8033 26.5046 15.1938 26.1141L14.4867 25.407ZM19.1951 20.6986L14.4867 25.407L15.1938 26.1141L19.9022 21.4057L19.1951 20.6986ZM24.6615 25.4579L19.9022 20.6986L19.1951 21.4057L23.9544 26.165L24.6615 25.4579ZM24.6615 25.4579L23.9544 26.165C24.3449 26.5555 24.9781 26.5555 25.3686 26.165L24.6615 25.4579ZM24.6615 25.4579L25.3686 26.165C25.7591 25.7745 25.7591 25.1413 25.3686 24.7508L24.6615 25.4579ZM19.9022 20.6986L24.6615 25.4579L25.3686 24.7508L20.6093 19.9915L19.9022 20.6986ZM25.0933 14.8004L19.9022 19.9915L20.6093 20.6986L25.8004 15.5075L25.0933 14.8004Z" fill="black" /></svg></button> <div class="shareProductIcons"><a href="https://www.facebook.com/sharer/sharer.php?u=<?php echo urlencode($block->getProductUrl());?>&t=<?php echo urlencode($block->getName())?>" onclick='javascript:window.open(this.href,"","width=640,height=480,left=0,top=0,location=no,status=yes,scrollbars=yes,resizable=yes");return false' title="Share on facebook" id="fbShare"><svg width="27" height="27" viewBox="0 0 27 27" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13.5 0C6.04406 0 0 6.04406 0 13.5C0 20.9559 6.04406 27 13.5 27C20.9559 27 27 20.9559 27 13.5C27 6.04406 20.9559 0 13.5 0ZM16.6978 9.32906H14.6686C14.4281 9.32906 14.1609 9.64547 14.1609 10.0659V11.5313H16.6992L16.3153 13.6209H14.1609V19.8942H11.7661V13.6209H9.59344V11.5313H11.7661V10.3022C11.7661 8.53875 12.9895 7.10578 14.6686 7.10578H16.6978V9.32906Z" fill="#667CEC" /></svg></a> <a href="http://twitter.com/home/?status=<?php echo urlencode($block->getProductUrl());?>(<?php echo urlencode($block->getName())?>)" onclick='javascript:window.open(this.href,"","width=640,height=480,left=0,top=0,location=no,status=yes,scrollbars=yes,resizable=yes");return false' title="Share on Twitter"><svg width="27" height="27" viewBox="0 0 27 27" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13.5 0C6.0453 0 0 6.0453 0 13.5C0 20.9547 6.0453 27 13.5 27C20.9547 27 27 20.9547 27 13.5C27 6.0453 20.9547 0 13.5 0ZM19.6639 10.5259C19.6699 10.6587 19.6728 10.7922 19.6728 10.9263C19.6728 15.0209 16.5561 19.7424 10.8565 19.7426H10.8567H10.8565C9.10657 19.7426 7.47819 19.2297 6.10689 18.3507C6.34934 18.3794 6.59612 18.3936 6.84599 18.3936C8.29784 18.3936 9.63391 17.8984 10.6946 17.0672C9.3381 17.0421 8.19443 16.1462 7.79974 14.915C7.98864 14.9512 8.18289 14.971 8.38209 14.971C8.66492 14.971 8.93889 14.9329 9.19926 14.8618C7.78141 14.578 6.71333 13.3249 6.71333 11.8244C6.71333 11.8104 6.71333 11.7979 6.71375 11.7849C7.13129 12.0171 7.60879 12.1567 8.11718 12.1724C7.28517 11.6172 6.73826 10.6682 6.73826 9.59312C6.73826 9.02541 6.89172 8.49353 7.15787 8.03561C8.68593 9.91056 10.9696 11.1436 13.5449 11.2732C13.4918 11.0462 13.4644 10.8097 13.4644 10.5667C13.4644 8.85608 14.8521 7.4683 16.5633 7.4683C17.4547 7.4683 18.2597 7.84506 18.8251 8.44739C19.5311 8.30814 20.194 8.05023 20.7928 7.6953C20.5611 8.41855 20.07 9.02541 19.4301 9.40917C20.057 9.33419 20.6544 9.16795 21.2095 8.92117C20.7949 9.54266 20.269 10.0885 19.6639 10.5259Z" fill="#00ACEE" /></svg></a> <a href="https://pinterest.com/pin/create/button/?url=<?php echo urlencode($block->getProductUrl()); ?>&media=<?php echo urlencode($block->getImageUrl());?> &description=<?php echo urlencode($block->getName()); ?>" onclick='javascript:window.open(this.href,"","width=640,height=480,left=0,top=0,location=no,status=yes,scrollbars=yes,resizable=yes");return false' title="Pin it"><svg width="28" height="27" viewBox="0 0 28 27" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M20.2771 1.81066C18.2088 0.603477 15.9498 0 13.5006 0C11.051 0 8.7921 0.603477 6.72375 1.81066C4.65541 3.0179 3.01762 4.65569 1.81066 6.72375C0.603477 8.79233 0 11.0513 0 13.5006C0 16.2311 0.743856 18.7097 2.23241 20.9361C3.72068 23.1632 5.67177 24.8095 8.08619 25.8757C8.0391 24.6218 8.11533 23.5848 8.31473 22.7645L10.055 15.4165C9.76193 14.8424 9.61554 14.1277 9.61554 13.272C9.61554 12.2759 9.86748 11.4436 10.3714 10.7759C10.875 10.1077 11.4904 9.77354 12.2171 9.77354C12.8029 9.77354 13.2543 9.9667 13.5708 10.3539C13.8872 10.7405 14.0456 11.227 14.0456 11.8128C14.0456 12.1763 13.9779 12.6188 13.8435 13.1401C13.7085 13.6617 13.5328 14.2651 13.3162 14.9508C13.0994 15.6362 12.9442 16.184 12.8503 16.5943C12.6859 17.309 12.8209 17.9213 13.2546 18.4312C13.6879 18.9411 14.2624 19.1958 14.9774 19.1958C16.2314 19.1958 17.2598 18.4988 18.0626 17.1041C18.8653 15.7095 19.2667 14.0161 19.2667 12.0236C19.2667 10.4885 18.7717 9.24018 17.7814 8.27925C16.791 7.31856 15.4108 6.83779 13.6415 6.83779C11.6608 6.83779 10.0581 7.47381 8.83373 8.74492C7.60911 10.0166 6.99677 11.5374 6.99677 13.3064C6.99677 14.3613 7.29581 15.2463 7.89327 15.9611C8.09244 16.1956 8.15692 16.4473 8.0867 16.7166C8.06302 16.7871 8.01626 16.9629 7.94605 17.2439C7.87588 17.525 7.82879 17.707 7.80539 17.7889C7.71149 18.1641 7.48896 18.2814 7.13715 18.1404C6.23469 17.7655 5.54901 17.1152 5.08051 16.1893C4.61172 15.2637 4.37745 14.1915 4.37745 12.9726C4.37745 12.1874 4.50328 11.4021 4.75523 10.6169C5.00717 9.83168 5.3995 9.073 5.93309 8.34023C6.46607 7.60836 7.10494 6.96041 7.84935 6.398C8.59349 5.83532 9.49884 5.38453 10.5654 5.0441C11.6317 4.70455 12.7804 4.53452 14.0109 4.53452C15.675 4.53452 17.1693 4.90372 18.4935 5.64184C19.8176 6.38029 20.8286 7.33557 21.5259 8.50738C22.223 9.67922 22.5719 10.9329 22.5719 12.2694C22.5719 14.0273 22.267 15.6095 21.6578 17.0159C21.0484 18.4223 20.1869 19.5267 19.0735 20.3294C17.9599 21.132 16.6942 21.5335 15.2764 21.5335C14.5614 21.5335 13.8934 21.3666 13.2723 21.0324C12.6508 20.6983 12.2232 20.3028 11.9889 19.8457C11.4616 21.9197 11.1452 23.1567 11.0396 23.5547C10.8168 24.387 10.3597 25.3477 9.66831 26.4376C10.9223 26.8126 12.1997 27 13.5006 27C15.9498 27 18.2088 26.3966 20.2771 25.1897C22.3454 23.9824 23.9832 22.3446 25.1905 20.276C26.3974 18.2076 27.0012 15.949 27.0012 13.4994C27.0012 11.0499 26.3974 8.79126 25.1905 6.72263C23.9835 4.65569 22.3454 3.0179 20.2771 1.81066Z" fill="#C7452A" /></svg></a></div></div></div><div class="priceWrap"><div class="price d-flex align-items-center"><!-- <h4 class="oldPrice"><?php <!-- <h4 class="actual"><?php <h4 class="actual"><?php echo $currencySymbol;?> <?php $fprice = (!empty($currentId))? $configurablePrice:$block->getPrice(); echo number_format($fprice, 2); ?></h4></div><p>Use coupon code <strong>FLAT25</strong> at checkout</p></div><?php $listBlock = $objectManager->get('\Magento\Catalog\Block\Product\ListProduct'); if(!empty($childrenIds)){ $checkQty = 1; $addToCartUrl = $block->getBaseUrl().'add/cart/product/'; $childrenIds = $childrenIds[0]; }else{ $addToCartUrl = (isset($currentProduct))?$listBlock->getAddToCartUrl($currentProduct):$listBlock->getAddToCartUrl($product); $childrenIds = 0; $checkQty = 0; } ?> <div class="btnWrap d-flex align-items-center justify-content-start"><!-- <a href="#;" class="btn btn-primary d-flex align-items-center"> --><form data-role="tocart-form" action="<?php echo $addToCartUrl; ?>" method="post" id="addToCart"><input type="hidden" name="updatedPrice" id="updatedPrice" value="<?php echo $currencySymbol;?><?php $totalP = (isset($currentProduct))?$currentProduct->getPrice():$block->getPrice();echo number_format($totalP, 2); ?>"><input type="hidden" name="newPrice" id="newPrice"><?php echo $block->getBlockHtml('formkey')?> <button type="submit" title="Add to Cart" class="btn btn-primary d-flex align-items-center"><svg width="29" height="25" viewBox="0 0 29 25" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M27.5045 3.94127H5.49772L5.11065 2.35287C4.77635 0.967234 3.54317 -0.00584495 2.12974 2.6426e-05H0.620084C0.277641 2.6426e-05 0 0.28009 0 0.625717C0 0.971148 0.277641 1.25121 0.620084 1.25121H2.12974C2.97082 1.24436 3.70634 1.8221 3.90618 2.64644L6.91735 15.0509C7.25339 16.4337 8.48755 17.4025 9.89884 17.3916H22.7794C24.2104 17.4031 25.4558 16.4071 25.7713 14.9994L28.1092 4.69143C28.1515 4.50825 28.1075 4.31567 27.9897 4.16947C27.8712 4.02249 27.6925 3.93833 27.5045 3.94127ZM24.5624 14.7244C24.3734 15.5615 23.6305 16.1515 22.7794 16.1404H9.89884C9.05893 16.1496 8.32302 15.5744 8.1224 14.7516L5.80116 5.19246H26.7263L24.5624 14.7244ZM20.0981 19.4115C18.5682 19.4115 17.3279 20.6622 17.3279 22.2054C17.3279 23.749 18.5678 25 20.0977 25C21.6279 25 22.8679 23.749 22.8679 22.2058C22.8665 20.663 21.6271 19.413 20.0981 19.4115ZM20.0981 23.7488C19.2529 23.7488 18.5682 23.0579 18.5682 22.2058C18.5682 21.3535 19.2529 20.6626 20.0977 20.6626C20.9428 20.6622 21.6275 21.3535 21.6275 22.2054C21.6266 23.0573 20.9424 23.7474 20.0981 23.7488ZM8.93897 22.2054C8.93897 20.6622 10.1794 19.4115 11.7092 19.4115C13.2385 19.413 14.4779 20.663 14.4793 22.2058C14.4793 23.749 13.2391 25 11.709 25C10.1792 25 8.93897 23.749 8.93897 22.2054ZM10.1794 22.2058C10.1794 23.0579 10.8643 23.7488 11.7092 23.7488C12.5536 23.7474 13.2379 23.0573 13.2389 22.2054C13.2389 21.3535 12.554 20.6622 11.709 20.6626C10.8643 20.6626 10.1794 21.3535 10.1794 22.2058Z" fill="white" /></svg> Add to Cart</button> <?php ?> <?php /* ?> <?php ?> <?php $postParams = $block->getAddToCartPostParams($_product); ?> <?php echo $_product->getName()?> <form data-role="tocart-form" action="<?php echo $postParams['action']; ?>" method="post"><input type="hidden" name="product" value="<?php echo $postParams['data']['product']; ?>"><input type="hidden" name="<?php echo Action::PARAM_NAME_URL_ENCODED; ?>" value="<?php echo $postParams['data'][Action::PARAM_NAME_URL_ENCODED]; ?>"><?php echo $block->getBlockHtml('formkey')?> <?php $storeManager = \Magento\Framework\App\ObjectManager::getInstance()->get('Magento\Store\Model\StoreManagerInterface'); ?> <button type="submit" title="<?php echo $block->escapeHtml(__('Add to Cart')); ?>" class="action tocart primary"><span><?php echo __('Add to Cart') ?></span></button></form><?php endforeach;?> */ ?> <!--</a> --></div><div class="custom-design"><div class="productDetailInfoTop d-flex align-items-center"><div class="flex1"><h6>Customize your design</h6></div><button class="btnDropCollapse collapsed" data-toggle="collapse" data-target="#customDesign" aria-expanded="false" aria-controls="customDesign" type="button"><svg width="15" height="9" viewBox="0 0 15 9" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.95 8.75859C7.25014 9.08047 7.7332 9.08047 8.0164 8.75859L14.75 1.55495C15.0833 1.19745 15.0833 0.62561 14.75 0.268119C14.4167 -0.0893736 13.8835 -0.0893737 13.5501 0.268119L8.0332 6.18497C7.73306 6.50685 7.25 6.50685 6.9668 6.18497L1.44986 0.268118C1.11652 -0.0893748 0.583328 -0.0893748 0.249998 0.268118C-0.0833323 0.625609 -0.0833323 1.19745 0.249998 1.55495L6.95 8.75859Z" fill="#A8A8A8" /></svg></button></div><input type="hidden" name="firstCustomisationStart" id="firstCustomisationStart"><input type="hidden" name="secondImageSelected" id="secondImageSelected"><input type="hidden" name="secondCustomisationStart" id="secondCustomisationStart"><div id="customDesign" class="collapse multi-collapse"><ul class="nav nav-pills mb-3" id="pills-tab" role="tablist"><li class="nav-item"><a class="nav-link active" id="pills-design-tab" data-toggle="pill" href="#pills-design" role="tab" aria-controls="pills-design" aria-selected="true">Upload your design</a></li> <li class="nav-item"><a class="nav-link" id="pills-clipart-tab" data-toggle="pill" href="#pills-clipart" role="tab" aria-controls="pills-clipart" aria-selected="false">Cliparts</a></li> <li class="nav-item"><a class="nav-link" id="pills-text-tab" data-toggle="pill" href="#pills-text" role="tab" aria-controls="pills-text" aria-selected="false">Add design text</a></li></ul><div class="tab-content" id="pills-tabContent"><div class="tab-pane fade show active" id="pills-design" role="tabpanel" aria-labelledby="pills-design-tab"><div class="all-design" id="displayCustomisedImages"></div><div class="no-degins"><p id="designUploaded">0 design uploaded</p><!-- <button type="file" class="btn btn-primary d-flex align-items-center upload-btn"> Upload your design</button> --></div><label class="btn btn-primary uploadBtn"><input class="d-none" type="file" name="customiserImages[]" id="customiserImages" multiple="multiple"><div class="storeProfileThemeDragBannerImgInner"><h5 class="mb-0">Upload your design</h5><!-- <b class="textBtnBlue">Choose file</b> --></div></label></div><div class="tab-pane fade" id="pills-clipart" role="tabpanel" aria-labelledby="pills-clipart-tab"><div class="tab-pane fade show active" id="pills-design" role="tabpanel" aria-labelledby="pills-design-tab"><div class="searchWrap position-relative"><input type="text" placeholder="Search here" /><svg width="21" height="21" viewBox="0 0 21 21" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M20.8184 19.929L15.7139 14.8257C17.0832 13.2519 17.9122 11.1984 17.9122 8.9541C17.9122 4.01375 13.8929 0 8.95609 0C4.01464 0 0 4.0184 0 8.9541C0 13.8898 4.0193 17.9082 8.95609 17.9082C11.2009 17.9082 13.2548 17.0794 14.829 15.7104L19.9335 20.8137C20.0546 20.9348 20.2176 21 20.3759 21C20.5343 21 20.6973 20.9395 20.8184 20.8137C21.0605 20.5716 21.0605 20.1712 20.8184 19.929ZM1.25283 8.9541C1.25283 4.70754 4.70858 1.25721 8.95143 1.25721C13.1989 1.25721 16.65 4.7122 16.65 8.9541C16.65 13.196 13.1989 16.6557 8.95143 16.6557C4.70858 16.6557 1.25283 13.2007 1.25283 8.9541Z" fill="#251C17"/></svg><div class="suggestion d-none"><div class="suggestion-wrap d-flex"><div class="list-item"><ul class="list-unstyled"><li> <a href="#;"> Anniversary</a></li> <li> <a href="#;"> Birthday</a></li> <li> <a href="#;"> Valentines</a></li> <li> <a href="#;"> Christmas</a></li> <li> <a href="#;"> Bachelor’s Party</a></li> <li> <a href="#;"> Friendship Day</a></li> <li> <a href="#;"> Graduation</a></li> <li> <a href="#;"> Easter</a></li> <li> <a href="#;"> New Year</a></li></ul></div><div class="item-thumb d-flex flex-column align-items-center"><!-- <img src="<?php ?>/images/design-pattern/design-pattern1.png" alt="img-thumb" class="img-fluid" /><img src="<?php ?>/images/design-pattern/design-pattern2.png" alt="img-thumb" class="img-fluid" /><img src="<?php ?>/images/design-pattern/design-pattern3.png" alt="img-thumb" class="img-fluid" /><img src="<?php ?>/images/design-pattern/design-pattern4.png" alt="img-thumb" class="img-fluid" /><img src="<?php ?>/images/design-pattern/design-pattern5.png" alt="img-thumb" class="img-fluid" /> --></div></div></div></div><div class="all-design"><?php $clipartCount = 6; for($i=1; $i<=$clipartCount;$i++){?> <div class="design-box"><img src="<?php echo $block->getViewFileUrl('/')?>/images/design-pattern/design-pattern<?php echo $i;?>.png" alt="img-thumb" class="img-fluid clipartClasses" id="clipartId_<?php echo $i;?>" /></div><?php } ?></div></div></div><div class="tab-pane fade" id="pills-text" role="tabpanel" aria-labelledby="pills-text-tab"><div class="add-text"><?php for($j=1;$j<=2;$j++){?> <div class="field-wrap"><div class="form-group d-flex align-items-center"><label for="name" class=" col-form-label mr-4"><strong> Design text <?php echo $j;?></strong></label> <div class="flex1 mr-3"><input type="text" class="form-control addText" id="addText_<?php echo $j;?>" placeholder="Name"></div><svg class="close d-none" data-toggle="collapse" data-target="#personalize_<?php echo $j;?>" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0.771341 15C0.57375 15 0.376158 14.9248 0.226034 14.7736C-0.0753447 14.4722 -0.0753447 13.9836 0.226034 13.6823L13.6826 0.226028C13.984 -0.0753428 14.4726 -0.0753428 14.774 0.226028C15.0753 0.5274 15.0753 1.016 14.774 1.31756L1.31759 14.7736C1.16634 14.9239 0.968745 15 0.771341 15Z" fill="#151515"/><path d="M14.2288 15C14.0313 15 13.8339 14.9248 13.6835 14.7736L0.226034 1.31756C-0.0753447 1.016 -0.0753447 0.5274 0.226034 0.226028C0.527413 -0.0753428 1.01602 -0.0753428 1.31759 0.226028L14.774 13.6823C15.0753 13.9836 15.0753 14.4722 14.774 14.7736C14.6227 14.9239 14.4253 15 14.2288 15Z" fill="#151515"/></svg><svg class="edit-icon" data-toggle="collapse" data-target="#personalize_<?php echo $j;?>" type="button" width="18" height="16" viewBox="0 0 18 16" fill="none" xmlns="http://www.w3.org/2000/svg" id="edit_icon_<?php echo $j;?>"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.1843 0.369231L14.3997 2.58462C14.892 3.07692 14.892 3.81538 14.3997 4.30769L5.16893 13.5385H1.23047V9.6L10.4612 0.369231C10.9535 -0.123077 11.692 -0.123077 12.1843 0.369231ZM13.5382 3.44615L11.3228 1.23077L9.47662 3.07692L11.692 5.29231L13.5382 3.44615ZM2.46124 10.0923V12.3077H4.67662L10.8305 6.15385L8.61508 3.93846L2.46124 10.0923ZM17.2308 14.5385H0V15.7692H17.2308V14.5385Z" fill="#151515"/></svg></div><div class="collapse personalize" id="personalize_<?php echo $j;?>"><div class="colorWrap flex-column"><h6>Text Color</h6><div class="colorWrapColors d-flex align-items-center"><span class="fontColorPanel active" style="background-color: #FFC62E;"></span> <span class="fontColorPanel" style="background-color: #151515"></span> <span class="fontColorPanel" style="background-color: #C7452A"></span> <span class="fontColorPanel" style="background-color: #1AAAAD"></span> <span class="fontColorPanel" style="background-color: #535353"></span> <span class="fontColorPanel" style="background-color: #C4C4C4"></span> <span class="fontColorPanel" style="background-color: #95C72A"></span> <span class="fontColorPanel" style="background-color: #871AAD"></span> <span class="fontColorPanel" class="colorWrapColorBorder" style="background-color: #FFFFFF"></span> <span class="fontColorPanel" class="active" style="background-color: #FFC62E;"></span> <span class="fontColorPanel" style="background-color: #151515"></span> <span class="fontColorPanel" style="background-color: #C7452A"></span> <span class="fontColorPanel" style="background-color: #1AAAAD"></span> <span class="fontColorPanel" style="background-color: #535353"></span> <span class="fontColorPanel" style="background-color: #C4C4C4"></span> <span class="fontColorPanel" style="background-color: #95C72A"></span> <span class="fontColorPanel" style="background-color: #871AAD"></span> <span class="fontColorPanel" class="colorWrapColorBorder" style="background-color: #FFFFFF"></span></div></div><div class="font-wrap"><h6>Font Type</h6><div class="dropdown"><button class="btn dropdown-toggle d-flex align-items-center" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> TBentham</button> <div class="dropdown-menu" aria-labelledby="dropdownMenuButton" x-placement="bottom-start" style="position: absolute; transform: translate3d(0px, 34px, 0px); top: 0px; left: 0px; will-change: transform;"><span class="fontFamilyPanel">Josefin Sans</span> <span class="fontFamilyPanel selected">TBentham</span> <span class="fontFamilyPanel">Cagliostro</span> <span class="fontFamilyPanel">Revenue report</span> <span class="fontFamilyPanel">Dhyana</span> <span class="fontFamilyPanel">Eagle Lake</span> <span class="fontFamilyPanel">Fira Sans</span> <span class="fontFamilyPanel">Great Vibes</span> <span class="fontFamilyPanel">Arial</span> <span class="fontFamilyPanel">Times New Roman</span></div></div></div></div></div><?php } ?> <input type="hidden" name="fieldId" id="fieldId"><!-- <div class="field-wrap"><div class="form-group d-flex align-items-center"><label for="name" class=" col-form-label mr-4 "><strong> Design text 2</strong></label> <div class="flex1 mr-3"><input type="text" class="form-control" id="name" placeholder="name "></div><svg class=" close d-none" data-toggle="collapse" data-target="#personalize2" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0.771341 15C0.57375 15 0.376158 14.9248 0.226034 14.7736C-0.0753447 14.4722 -0.0753447 13.9836 0.226034 13.6823L13.6826 0.226028C13.984 -0.0753428 14.4726 -0.0753428 14.774 0.226028C15.0753 0.5274 15.0753 1.016 14.774 1.31756L1.31759 14.7736C1.16634 14.9239 0.968745 15 0.771341 15Z" fill="#151515"/><path d="M14.2288 15C14.0313 15 13.8339 14.9248 13.6835 14.7736L0.226034 1.31756C-0.0753447 1.016 -0.0753447 0.5274 0.226034 0.226028C0.527413 -0.0753428 1.01602 -0.0753428 1.31759 0.226028L14.774 13.6823C15.0753 13.9836 15.0753 14.4722 14.774 14.7736C14.6227 14.9239 14.4253 15 14.2288 15Z" fill="#151515"/></svg><svg class="edit-icon" data-toggle="collapse" data-target="#personalize2" type="button" width="18" height="16" viewBox="0 0 18 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.1843 0.369231L14.3997 2.58462C14.892 3.07692 14.892 3.81538 14.3997 4.30769L5.16893 13.5385H1.23047V9.6L10.4612 0.369231C10.9535 -0.123077 11.692 -0.123077 12.1843 0.369231ZM13.5382 3.44615L11.3228 1.23077L9.47662 3.07692L11.692 5.29231L13.5382 3.44615ZM2.46124 10.0923V12.3077H4.67662L10.8305 6.15385L8.61508 3.93846L2.46124 10.0923ZM17.2308 14.5385H0V15.7692H17.2308V14.5385Z" fill="#151515"/></svg></div><div class="collapse personalize" id="personalize2"><div class="colorWrap flex-column"><h6>Text Color</h6><div class="colorWrapColors d-flex align-items-center"><span class="active" style="background-color: #FFC62E;"></span> <span style="background-color: #151515"></span> <span style="background-color: #C7452A"></span> <span style="background-color: #1AAAAD"></span> <span style="background-color: #535353"></span> <span style="background-color: #C4C4C4"></span> <span style="background-color: #95C72A"></span> <span style="background-color: #871AAD"></span> <span class="colorWrapColorBorder" style="background-color: #FFFFFF"></span> <span class="active" style="background-color: #FFC62E;"></span> <span style="background-color: #151515"></span> <span style="background-color: #C7452A"></span> <span style="background-color: #1AAAAD"></span> <span style="background-color: #535353"></span> <span style="background-color: #C4C4C4"></span> <span style="background-color: #95C72A"></span> <span style="background-color: #871AAD"></span> <span class="colorWrapColorBorder" style="background-color: #FFFFFF"></span></div></div><div class="font-wrap"><h6>Font Type</h6><div class="dropdown"><button class="btn dropdown-toggle d-flex align-items-center" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> Josefin Sans</button> <div class="dropdown-menu" aria-labelledby="dropdownMenuButton" x-placement="bottom-start" style="position: absolute; transform: translate3d(0px, 34px, 0px); top: 0px; left: 0px; will-change: transform;"><span class="dropdown-item selected">Josefin Sans</span> <span class="dropdown-item">TBentham</span> <span class="dropdown-item">Cagliostro</span> <span class="dropdown-item">Revenue report</span> <span class="dropdown-item">Dhyana</span> <span class="dropdown-item">Eagle Lake</span> <span class="dropdown-item">Fira Sans</span> <span class="dropdown-item">Great Vibes</span></div></div></div></div></div> --></div><a href="#;" class="add-more"> + Add another</a></div></div><div class="alignment-wrap d-flex align-items-center"><button class="btn btn-link d-flex align-items-center"><img src="./images/icons/front.png" alt="" class="mr-3"> Bring in front</button> <button class="btn btn-link d-flex align-items-center"><img src="./images/icons/back.png" alt="" class="mr-3"> Send to back</button></div><div class="customize-type"><div class="front-type"><div class="d-flex"><div class="flex1"><h6>FRONT - Customization Type</h6></div><div class="dropdown"><button class="btnDropCollapse dropdown-toggle" data-toggle="dropdown" id="#choose-type-front" aria-expanded="false" aria-controls="choose-type"><svg width="23" height="23" viewBox="0 0 23 23" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="0.5" y="0.5" width="9" height="9" rx="0.5" stroke="#151515"/><rect x="0.5" y="13.5" width="9" height="9" rx="0.5" stroke="#151515"/><rect x="13.5" y="0.5" width="9" height="9" rx="0.5" stroke="#151515"/><circle cx="18" cy="18" r="4.5" stroke="#151515"/></svg></button> <div id="choose-type-front" class="dropdown-menu choose-type"><div class="form-group "><label class="checkUnCheck d-flex justify-content-between"><input type="radio" name="frontCustomisationtype" class="frontCustomisationtype" checked value="100"><span class="checkUnCheckBox"></span> <span class="checkUnCheckText">Laser</span> <svg class="not-supported" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.9992 22.7998C6.04722 22.7998 1.19922 17.9518 1.19922 11.9998C1.19922 6.0478 6.04722 1.1998 11.9992 1.1998C17.9512 1.1998 22.7992 6.0478 22.7992 11.9998C22.7992 17.9518 17.9512 22.7998 11.9992 22.7998ZM11.9992 3.1198C7.10322 3.1198 3.11922 7.1038 3.11922 11.9998C3.11922 16.8958 7.10322 20.8798 11.9992 20.8798C16.8952 20.8798 20.8792 16.8958 20.8792 11.9998C20.8792 7.1038 16.8952 3.1198 11.9992 3.1198Z" fill="#C7452A"/><path d="M12.0008 16.6088C12.6635 16.6088 13.2008 17.146 13.2008 17.8088C13.2008 18.4715 12.6635 19.0088 12.0008 19.0088C11.338 19.0088 10.8008 18.4715 10.8008 17.8088C10.8008 17.146 11.338 16.6088 12.0008 16.6088Z" fill="#C7452A"/><path d="M11.9991 14.8086C11.4711 14.8086 11.0391 14.3766 11.0391 13.8486V5.92859C11.0391 5.40059 11.4711 4.96859 11.9991 4.96859C12.5271 4.96859 12.9591 5.40059 12.9591 5.92859V13.8486C12.9591 14.4006 12.5271 14.8086 11.9991 14.8086Z" fill="#C7452A"/></svg></label></div><div class="form-group "><label class="checkUnCheck d-flex justify-content-between"><input type="radio" name="frontCustomisationtype" class="frontCustomisationtype" value="200" ><span class="checkUnCheckBox"></span> <span class="checkUnCheckText">DTG (Direct to Garment)</span> <svg class="not-supported" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.9992 22.7998C6.04722 22.7998 1.19922 17.9518 1.19922 11.9998C1.19922 6.0478 6.04722 1.1998 11.9992 1.1998C17.9512 1.1998 22.7992 6.0478 22.7992 11.9998C22.7992 17.9518 17.9512 22.7998 11.9992 22.7998ZM11.9992 3.1198C7.10322 3.1198 3.11922 7.1038 3.11922 11.9998C3.11922 16.8958 7.10322 20.8798 11.9992 20.8798C16.8952 20.8798 20.8792 16.8958 20.8792 11.9998C20.8792 7.1038 16.8952 3.1198 11.9992 3.1198Z" fill="#C7452A"/><path d="M12.0008 16.6088C12.6635 16.6088 13.2008 17.146 13.2008 17.8088C13.2008 18.4715 12.6635 19.0088 12.0008 19.0088C11.338 19.0088 10.8008 18.4715 10.8008 17.8088C10.8008 17.146 11.338 16.6088 12.0008 16.6088Z" fill="#C7452A"/><path d="M11.9991 14.8086C11.4711 14.8086 11.0391 14.3766 11.0391 13.8486V5.92859C11.0391 5.40059 11.4711 4.96859 11.9991 4.96859C12.5271 4.96859 12.9591 5.40059 12.9591 5.92859V13.8486C12.9591 14.4006 12.5271 14.8086 11.9991 14.8086Z" fill="#C7452A"/></svg></label></div><div class="form-group "><label class="checkUnCheck d-flex justify-content-between"><input type="radio" name="frontCustomisationtype" class="frontCustomisationtype" value="110"><span class="checkUnCheckBox"></span> <span class="checkUnCheckText">Embroidery</span> <svg class="not-supported" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.9992 22.7998C6.04722 22.7998 1.19922 17.9518 1.19922 11.9998C1.19922 6.0478 6.04722 1.1998 11.9992 1.1998C17.9512 1.1998 22.7992 6.0478 22.7992 11.9998C22.7992 17.9518 17.9512 22.7998 11.9992 22.7998ZM11.9992 3.1198C7.10322 3.1198 3.11922 7.1038 3.11922 11.9998C3.11922 16.8958 7.10322 20.8798 11.9992 20.8798C16.8952 20.8798 20.8792 16.8958 20.8792 11.9998C20.8792 7.1038 16.8952 3.1198 11.9992 3.1198Z" fill="#C7452A"/><path d="M12.0008 16.6088C12.6635 16.6088 13.2008 17.146 13.2008 17.8088C13.2008 18.4715 12.6635 19.0088 12.0008 19.0088C11.338 19.0088 10.8008 18.4715 10.8008 17.8088C10.8008 17.146 11.338 16.6088 12.0008 16.6088Z" fill="#C7452A"/><path d="M11.9991 14.8086C11.4711 14.8086 11.0391 14.3766 11.0391 13.8486V5.92859C11.0391 5.40059 11.4711 4.96859 11.9991 4.96859C12.5271 4.96859 12.9591 5.40059 12.9591 5.92859V13.8486C12.9591 14.4006 12.5271 14.8086 11.9991 14.8086Z" fill="#C7452A"/></svg></label></div><div class="form-group "><label class="checkUnCheck d-flex justify-content-between"><input type="radio" name="frontCustomisationtype" class="frontCustomisationtype" value="90"><span class="checkUnCheckBox"></span> <span class="checkUnCheckText">Vinyl</span> <svg class="not-supported" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.9992 22.7998C6.04722 22.7998 1.19922 17.9518 1.19922 11.9998C1.19922 6.0478 6.04722 1.1998 11.9992 1.1998C17.9512 1.1998 22.7992 6.0478 22.7992 11.9998C22.7992 17.9518 17.9512 22.7998 11.9992 22.7998ZM11.9992 3.1198C7.10322 3.1198 3.11922 7.1038 3.11922 11.9998C3.11922 16.8958 7.10322 20.8798 11.9992 20.8798C16.8952 20.8798 20.8792 16.8958 20.8792 11.9998C20.8792 7.1038 16.8952 3.1198 11.9992 3.1198Z" fill="#C7452A"/><path d="M12.0008 16.6088C12.6635 16.6088 13.2008 17.146 13.2008 17.8088C13.2008 18.4715 12.6635 19.0088 12.0008 19.0088C11.338 19.0088 10.8008 18.4715 10.8008 17.8088C10.8008 17.146 11.338 16.6088 12.0008 16.6088Z" fill="#C7452A"/><path d="M11.9991 14.8086C11.4711 14.8086 11.0391 14.3766 11.0391 13.8486V5.92859C11.0391 5.40059 11.4711 4.96859 11.9991 4.96859C12.5271 4.96859 12.9591 5.40059 12.9591 5.92859V13.8486C12.9591 14.4006 12.5271 14.8086 11.9991 14.8086Z" fill="#C7452A"/></svg></label></div></div></div></div><p>Laser</p></div><div class="back-type"><div class="d-flex"><div class="flex1"><h6>BACK - Customization Type</h6></div><div class="dropdown"><button class="btnDropCollapse dropdown-toggle" data-toggle="dropdown" id="#choose-type-back" aria-expanded="false" aria-controls="choose-type"><svg width="23" height="23" viewBox="0 0 23 23" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="0.5" y="0.5" width="9" height="9" rx="0.5" stroke="#151515"/><rect x="0.5" y="13.5" width="9" height="9" rx="0.5" stroke="#151515"/><rect x="13.5" y="0.5" width="9" height="9" rx="0.5" stroke="#151515"/><circle cx="18" cy="18" r="4.5" stroke="#151515"/></svg></button> <div id="choose-type-back" class="dropdown-menu choose-type"><div class="form-group "><label class="checkUnCheck d-flex justify-content-between"><input type="radio" name="backCustomisationtype" class="backCustomisationtype" value="100"><span class="checkUnCheckBox"></span> <span class="checkUnCheckText">Laser</span> <svg class="not-supported" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.9992 22.7998C6.04722 22.7998 1.19922 17.9518 1.19922 11.9998C1.19922 6.0478 6.04722 1.1998 11.9992 1.1998C17.9512 1.1998 22.7992 6.0478 22.7992 11.9998C22.7992 17.9518 17.9512 22.7998 11.9992 22.7998ZM11.9992 3.1198C7.10322 3.1198 3.11922 7.1038 3.11922 11.9998C3.11922 16.8958 7.10322 20.8798 11.9992 20.8798C16.8952 20.8798 20.8792 16.8958 20.8792 11.9998C20.8792 7.1038 16.8952 3.1198 11.9992 3.1198Z" fill="#C7452A"/><path d="M12.0008 16.6088C12.6635 16.6088 13.2008 17.146 13.2008 17.8088C13.2008 18.4715 12.6635 19.0088 12.0008 19.0088C11.338 19.0088 10.8008 18.4715 10.8008 17.8088C10.8008 17.146 11.338 16.6088 12.0008 16.6088Z" fill="#C7452A"/><path d="M11.9991 14.8086C11.4711 14.8086 11.0391 14.3766 11.0391 13.8486V5.92859C11.0391 5.40059 11.4711 4.96859 11.9991 4.96859C12.5271 4.96859 12.9591 5.40059 12.9591 5.92859V13.8486C12.9591 14.4006 12.5271 14.8086 11.9991 14.8086Z" fill="#C7452A"/></svg></label></div><div class="form-group "><label class="checkUnCheck d-flex justify-content-between"><input type="radio" name="backCustomisationtype" class="backCustomisationtype" checked value="200"><span class="checkUnCheckBox"></span> <span class="checkUnCheckText">DTG (Direct to Garment)</span> <svg class="not-supported" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.9992 22.7998C6.04722 22.7998 1.19922 17.9518 1.19922 11.9998C1.19922 6.0478 6.04722 1.1998 11.9992 1.1998C17.9512 1.1998 22.7992 6.0478 22.7992 11.9998C22.7992 17.9518 17.9512 22.7998 11.9992 22.7998ZM11.9992 3.1198C7.10322 3.1198 3.11922 7.1038 3.11922 11.9998C3.11922 16.8958 7.10322 20.8798 11.9992 20.8798C16.8952 20.8798 20.8792 16.8958 20.8792 11.9998C20.8792 7.1038 16.8952 3.1198 11.9992 3.1198Z" fill="#C7452A"/><path d="M12.0008 16.6088C12.6635 16.6088 13.2008 17.146 13.2008 17.8088C13.2008 18.4715 12.6635 19.0088 12.0008 19.0088C11.338 19.0088 10.8008 18.4715 10.8008 17.8088C10.8008 17.146 11.338 16.6088 12.0008 16.6088Z" fill="#C7452A"/><path d="M11.9991 14.8086C11.4711 14.8086 11.0391 14.3766 11.0391 13.8486V5.92859C11.0391 5.40059 11.4711 4.96859 11.9991 4.96859C12.5271 4.96859 12.9591 5.40059 12.9591 5.92859V13.8486C12.9591 14.4006 12.5271 14.8086 11.9991 14.8086Z" fill="#C7452A"/></svg></label></div><div class="form-group "><label class="checkUnCheck d-flex justify-content-between"><input type="radio" name="backCustomisationtype" class="backCustomisationtype" value="110"><span class="checkUnCheckBox"></span> <span class="checkUnCheckText">Embroidery</span> <svg class="not-supported" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.9992 22.7998C6.04722 22.7998 1.19922 17.9518 1.19922 11.9998C1.19922 6.0478 6.04722 1.1998 11.9992 1.1998C17.9512 1.1998 22.7992 6.0478 22.7992 11.9998C22.7992 17.9518 17.9512 22.7998 11.9992 22.7998ZM11.9992 3.1198C7.10322 3.1198 3.11922 7.1038 3.11922 11.9998C3.11922 16.8958 7.10322 20.8798 11.9992 20.8798C16.8952 20.8798 20.8792 16.8958 20.8792 11.9998C20.8792 7.1038 16.8952 3.1198 11.9992 3.1198Z" fill="#C7452A"/><path d="M12.0008 16.6088C12.6635 16.6088 13.2008 17.146 13.2008 17.8088C13.2008 18.4715 12.6635 19.0088 12.0008 19.0088C11.338 19.0088 10.8008 18.4715 10.8008 17.8088C10.8008 17.146 11.338 16.6088 12.0008 16.6088Z" fill="#C7452A"/><path d="M11.9991 14.8086C11.4711 14.8086 11.0391 14.3766 11.0391 13.8486V5.92859C11.0391 5.40059 11.4711 4.96859 11.9991 4.96859C12.5271 4.96859 12.9591 5.40059 12.9591 5.92859V13.8486C12.9591 14.4006 12.5271 14.8086 11.9991 14.8086Z" fill="#C7452A"/></svg></label></div><div class="form-group "><label class="checkUnCheck d-flex justify-content-between"><input type="radio" name="backCustomisationtype" class="backCustomisationtype" value="90"><span class="checkUnCheckBox"></span> <span class="checkUnCheckText">Vinyl</span> <svg class="not-supported" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.9992 22.7998C6.04722 22.7998 1.19922 17.9518 1.19922 11.9998C1.19922 6.0478 6.04722 1.1998 11.9992 1.1998C17.9512 1.1998 22.7992 6.0478 22.7992 11.9998C22.7992 17.9518 17.9512 22.7998 11.9992 22.7998ZM11.9992 3.1198C7.10322 3.1198 3.11922 7.1038 3.11922 11.9998C3.11922 16.8958 7.10322 20.8798 11.9992 20.8798C16.8952 20.8798 20.8792 16.8958 20.8792 11.9998C20.8792 7.1038 16.8952 3.1198 11.9992 3.1198Z" fill="#C7452A"/><path d="M12.0008 16.6088C12.6635 16.6088 13.2008 17.146 13.2008 17.8088C13.2008 18.4715 12.6635 19.0088 12.0008 19.0088C11.338 19.0088 10.8008 18.4715 10.8008 17.8088C10.8008 17.146 11.338 16.6088 12.0008 16.6088Z" fill="#C7452A"/><path d="M11.9991 14.8086C11.4711 14.8086 11.0391 14.3766 11.0391 13.8486V5.92859C11.0391 5.40059 11.4711 4.96859 11.9991 4.96859C12.5271 4.96859 12.9591 5.40059 12.9591 5.92859V13.8486C12.9591 14.4006 12.5271 14.8086 11.9991 14.8086Z" fill="#C7452A"/></svg></label></div></div></div></div><p>DTG (Direct to Garment)</p></div></div></div></div><!---------------------- Color Choose -----------------><?php if($product->getTypeId() == \Magento\ConfigurableProduct\Model\Product\Type\Configurable::TYPE_CODE){ ?> <div class="colorWrap"><h6>Choose color</h6><div class="colorWrapColors d-flex align-items-center"><div id="colorWrapMore" class="multi-collapse collapse"><div class="colorWrapMore"><!-- <span class="active" style="background-color: #FFC62E;"></span> <span style="background-color: #151515"></span> <span style="background-color: #C7452A"></span> <span style="background-color: #1AAAAD"></span> <span style="background-color: #535353"></span> <span style="background-color: #C4C4C4"></span> <span style="background-color: #95C72A"></span> <span style="background-color: #871AAD"></span> <span class="colorWrapColorBorder" style="background-color: #FFFFFF"></span> --><?php foreach ($collection as $simg) { $getcolorId = $simg->getColor(); $getId = $simg->getId(); $swatchCollection = $objectManager->create('Magento\Swatches\Model\ResourceModel\Swatch\Collection'); $swatchCollection->addFieldtoFilter('option_id',$getcolorId); $item=$swatchCollection->getFirstItem(); $ThumbImage = $block->getProductImgById($simg->getId()); ?> <span class="cimageUrl" data-image = "<?php echo $ThumbImage;?>" data-id = "<?php echo $getId;?>"><img src="<?=$ThumbImage?>" style="width:100%;height:100%;"/></span> <?php } ?></div></div></div><button class="btnDropCollapse" data-toggle="collapse" data-target="#colorWrapMore" aria-expanded="true" aria-controls="colorWrapMore" type="button"><svg width="15" height="9" viewBox="0 0 15 9" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.95 8.75859C7.25014 9.08047 7.7332 9.08047 8.0164 8.75859L14.75 1.55495C15.0833 1.19745 15.0833 0.62561 14.75 0.268119C14.4167 -0.0893736 13.8835 -0.0893737 13.5501 0.268119L8.0332 6.18497C7.73306 6.50685 7.25 6.50685 6.9668 6.18497L1.44986 0.268118C1.11652 -0.0893748 0.583328 -0.0893748 0.249998 0.268118C-0.0833323 0.625609 -0.0833323 1.19745 0.249998 1.55495L6.95 8.75859Z" fill="#A8A8A8"></path></svg></button></div><?php }?> <div class="selectQuantity"><div class="d-flex"><div class="flex1"><h6>Select quantity</h6><input type="hidden" name="currentProductId" id="currentProductId" value="<?php $pid = (isset($currentProduct))?$currentProduct->getId():$product->getId(); echo $pid;?>"><input type="hidden" name="frontPrice" id="frontPrice"><input type="hidden" name="backendPrice" id="backendPrice"></div><button class="btnDropCollapse collapsed" data-toggle="collapse" data-target="#quantityMore" aria-expanded="false" aria-controls="quantityMore" type="button"><svg width="15" height="9" viewBox="0 0 15 9" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.95 8.75859C7.25014 9.08047 7.7332 9.08047 8.0164 8.75859L14.75 1.55495C15.0833 1.19745 15.0833 0.62561 14.75 0.268119C14.4167 -0.0893736 13.8835 -0.0893737 13.5501 0.268119L8.0332 6.18497C7.73306 6.50685 7.25 6.50685 6.9668 6.18497L1.44986 0.268118C1.11652 -0.0893748 0.583328 -0.0893748 0.249998 0.268118C-0.0833323 0.625609 -0.0833323 1.19745 0.249998 1.55495L6.95 8.75859Z" fill="#A8A8A8" /></svg></button></div><div id="quantityMore" class="collapse multi-collapse"><div class="uantityMore"><div class="d-flex"><div class="flex1"><!-- <h6>Quantity</h6> --></div><!-- <a href="#">size guide</a> --></div><table class="table"><thead><tr><th>Size</th><th>Quantity</th><th>Price</th><!-- <th>discount</th> --></tr></thead><tbody><?php if(!empty($size_array)){ $count = 1; $tmpLoop = 0; $customArr = array(); if (!empty($childrenIds)){ foreach($childrenIds as $children){ $customArr[] = $children; } } else { $customArr[] = $product->getId(); } foreach($size_array as $sku){ ?> <tr><td><label class="checkBoxCustom"><input type="checkbox" name="productSize" id="checkSizeBox_<?=$count?>" class="checkSizeBox" /><span class="checkBoxCustomCheck"></span> <b><?php echo $sku['size']; ?></b></label></td><td><input type="text" placeholder="-" class="tierPriceChecker" id="tierPriceChecker_<?=$count?>" name="productQuantity[<?php echo $sku['size']; ?>_<?php echo $customArr[$tmpLoop]?>]" data-pid="<?php echo $sku['id']?>"/><input type="hidden" name="getChildProductsId[<?php echo $sku['id']?>]" value="<?php echo $sku['id']?>"></td><td><input type="text" disabled placeholder="-" id="tierPrice_<?=$count?>" class="tierPriceNew" name="tierPriceValue[<?php echo $sku['size']; ?>]" value="$<?php echo number_format($sku['price'], 2); ?>" style="width: 100%;"/><input type="hidden" value="<?php echo number_format($sku['price'], 2); ?>" placeholder="-" id="tierPriceOld_<?=$count?>" name="AttrPricing[<?php echo $sku['size']; ?>]"/></td></tr><?php $count++; $tmpLoop++; } } ?></form></tbody></table></div></div></div><div class="delivery"><div class="deliveryTop"><strong>Delivery</strong> <svg width="38" height="16" viewBox="0 0 38 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M32.5 4H29V8.5H35.5L32.5 4Z" fill="#00BFF3" /><path d="M12.9436 13.5172H8.22432C7.89314 13.5172 7.64475 13.2414 7.64475 12.9379V0.57931C7.64475 0.275862 7.89314 0 8.22432 0H29.3923C29.7235 0 29.9718 0.275862 29.9718 0.57931V3.53103L32.8697 3.50345C33.0629 3.47586 33.2561 3.55862 33.3941 3.72414L36.899 8.30345C36.9818 8.41379 37.037 8.55172 37.037 8.68966V12.9379C37.037 13.2414 36.7611 13.5172 36.4299 13.5172H35.2707C35.3535 14.869 34.2772 16 32.9249 16C31.5726 16 30.4962 14.869 30.579 13.5172H24.673C24.7558 14.869 23.6794 16 22.3271 16C20.9748 16 19.8984 14.869 19.9812 13.5172H17.6354C17.7182 14.869 16.6418 16 15.2895 16C13.9372 16 12.8608 14.869 12.9436 13.5172ZM5.29889 9.10345C5.60247 9.10345 5.87846 9.37931 5.87846 9.68276C5.87846 10.0138 5.60247 10.2897 5.29889 10.2897H2.92543C2.62185 10.2897 2.34586 10.0138 2.34586 9.68276C2.34586 9.37931 2.62185 9.10345 2.92543 9.10345H5.29889ZM5.29889 6.17931C5.60247 6.17931 5.87846 6.42759 5.87846 6.75862C5.87846 7.08966 5.60247 7.33793 5.29889 7.33793H1.7663C1.43512 7.33793 1.18673 7.08966 1.18673 6.75862C1.18673 6.42759 1.43512 6.17931 1.7663 6.17931H5.29889ZM5.29889 3.22759C5.60247 3.22759 5.87846 3.50345 5.87846 3.8069C5.87846 4.13793 5.60247 4.41379 5.29889 4.41379H0.579566C0.275984 4.41379 0 4.13793 0 3.8069C0 3.50345 0.275984 3.22759 0.579566 3.22759H5.29889ZM35.8503 9.29655H29.9718V12.331H30.9654C31.407 11.6966 32.1245 11.3103 32.9249 11.3103C33.6976 11.3103 34.4152 11.6966 34.8568 12.331H35.8503V9.29655ZM29.9718 8.11034H35.2431L32.6213 4.66207L29.9718 4.68966V8.11034ZM20.3952 12.331C20.8368 11.6966 21.5543 11.3103 22.3271 11.3103C23.1275 11.3103 23.845 11.6966 24.2866 12.331H28.8127V4.11035V1.18621H8.80389V12.331H13.33C13.7716 11.6966 14.4892 11.3103 15.2895 11.3103C16.0623 11.3103 16.8074 11.6966 17.2214 12.331H20.3952ZM15.2895 12.469C14.6271 12.469 14.1028 12.9931 14.1028 13.6552C14.1028 14.2897 14.6271 14.8138 15.2895 14.8138C15.9243 14.8138 16.4486 14.3172 16.4486 13.6552C16.4486 12.9931 15.9243 12.469 15.2895 12.469ZM22.3271 12.469C21.6923 12.469 21.168 12.9931 21.168 13.6552C21.168 14.2897 21.6923 14.8138 22.3271 14.8138C22.9895 14.8138 23.5138 14.3172 23.5138 13.6552C23.5138 12.9931 22.9895 12.469 22.3271 12.469ZM32.9249 12.469C32.2625 12.469 31.7381 12.9931 31.7381 13.6552C31.7381 14.3172 32.2625 14.8138 32.9249 14.8138C33.5596 14.8138 34.084 14.3172 34.084 13.6552C34.084 12.9931 33.5596 12.469 32.9249 12.469Z" fill="black" /></svg></div><div class="deliveryCheckPin"><input type="text" placeholder="Enter pincode" name="pincodeChecker" id="pincodeChecker" /><button id="pincodeCheckerBtn" type="button">Check</button> <p id="pincodeCheckerResult"></p></div><div class="deliveryText"><p>Please enter PIN code to check delivery time & Pay on Delivery Availability</p><div><span>( 5- 7 days standard delivery )</span> <span>Need it sooner?</span> <a href="#">Contact Us</a></div></div></div><div class="productDetailInfo"><div class="productDetailInfoTop"><div class="flex1"><h6>Product details</h6></div><button class="btnDropCollapse collapsed" data-toggle="collapse" data-target="#productDetailMore" aria-expanded="false" aria-controls="productDetailMore"><svg width="15" height="9" viewBox="0 0 15 9" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.95 8.75859C7.25014 9.08047 7.7332 9.08047 8.0164 8.75859L14.75 1.55495C15.0833 1.19745 15.0833 0.62561 14.75 0.268119C14.4167 -0.0893736 13.8835 -0.0893737 13.5501 0.268119L8.0332 6.18497C7.73306 6.50685 7.25 6.50685 6.9668 6.18497L1.44986 0.268118C1.11652 -0.0893748 0.583328 -0.0893748 0.249998 0.268118C-0.0833323 0.625609 -0.0833323 1.19745 0.249998 1.55495L6.95 8.75859Z" fill="#A8A8A8" /></svg></button></div><div id="productDetailMore" class="collapse multi-collapse show"><div class="productDetailMore"><?php $pdtail = (isset($currentProduct))?$currentProduct->getDescription():$product->getDescription(); ?></div></div></div></div></div></div></div></div></section><!-- Similar Product --><?php /* <section class="similarProduct"><div class="outerContainer"><div class="container"><div class="row"><div class="col-md-12"><h4>You might also like</h4></div><div class="col-md-12"><div class="productWrap d-flex align-items-start"><?php if (!empty($relatedProducts)) { foreach ($relatedProducts as $relatedProduct) { $id = $relatedProduct->getId(); ?> <div class="product"><div class="productImgSlider"><?php $count = 1; foreach($block->getAllProductImagesById($id) as $images){ ?> <img src="<?php echo $images['url'];?>" id="side_<?php echo $count; ?>" data-side ="<?php echo $images['url'];?>" class="img-fluid"/><?php $count ++ ; } ?></div><div class="productContent"><div class="topWrap d-flex align-items-center justify-content-between"><h6><?php echo $block->getProductById($id)->getName(); ?></h6><svg width="24" height="21" viewBox="0 0 24 21" fill="#C7452A" stroke="#C7452A" stroke-width="0.2" xmlns="http://www.w3.org/2000/svg"><path d="M15.1614 18.1119L15.1606 18.1125C14.3849 18.7736 13.5061 19.5226 12.5947 20.3195C12.335 20.5469 12.0018 20.6721 11.6562 20.6721C11.3108 20.6721 10.9774 20.5469 10.7179 20.3198C9.80441 19.521 8.92427 18.7708 8.14715 18.1088L8.14714 18.1087L8.14082 18.1034C5.87182 16.1696 3.9028 14.4916 2.53088 12.8361C0.992397 10.9798 0.269085 9.21039 0.269085 7.27252C0.269085 5.39493 0.912827 3.65876 2.08622 2.38597C3.27396 1.09774 4.90435 0.388281 6.67521 0.388281C8.00089 0.388281 9.21568 0.807881 10.2833 1.63354C10.7881 2.02391 11.2475 2.49563 11.6562 3.0413C12.0648 2.49562 12.5244 2.0239 13.029 1.63355L13.029 1.63355C14.0966 0.807881 15.3114 0.388281 16.6371 0.388281C18.4081 0.388281 20.0383 1.09774 21.2261 2.38596L21.2261 2.38597C22.3994 3.65875 23.0434 5.39492 23.0434 7.27252C23.0434 9.21039 22.3199 10.9798 20.7814 12.8363L20.7044 12.7724L20.7814 12.8363C19.4091 14.492 17.4392 16.1707 15.1691 18.1053L15.1654 18.1084L15.1646 18.1091L15.1614 18.1119ZM19.6094 11.8649L19.6864 11.9287L19.6094 11.8649C20.9371 10.2628 21.5212 8.84857 21.5212 7.27252C21.5212 5.77284 21.017 4.40496 20.107 3.41781C19.2108 2.44595 17.9793 1.91065 16.6371 1.91065C15.6566 1.91065 14.7567 2.2219 13.9603 2.83769C13.2488 3.38797 12.7515 4.08538 12.4591 4.5755L12.4591 4.57553C12.2888 4.86079 11.9882 5.03159 11.6562 5.03159C11.3242 5.03159 11.0236 4.86079 10.8534 4.57553L10.9392 4.52427L10.8534 4.57553C10.5608 4.08538 10.0635 3.38797 9.35211 2.83769C8.55572 2.2219 7.65588 1.91065 6.67521 1.91065C5.33313 1.91065 4.10147 2.44596 3.20549 3.4178C2.29544 4.40495 1.79128 5.77283 1.79128 7.27252C1.79128 8.84857 2.37531 10.2628 3.70291 11.8649C4.9894 13.4173 6.90505 15.05 9.13455 16.9502C9.8962 17.599 10.7572 18.3329 11.658 19.1166C12.5536 18.3344 13.4132 17.6017 14.1732 16.954L14.1741 16.9533L14.1774 16.9505C14.1775 16.9504 14.1776 16.9503 14.1777 16.9502C16.4072 15.0502 18.3229 13.4172 19.6094 11.8649Z" /></svg></div><p><?php echo $block->getProductById($id)->getShortDescription(); ?></p><div class="price"><strong><?php echo $currencySymbol;?><?php echo number_format($block->getProductById($id)->getFinalPrice(),2); ?></strong></div></div></div><?php } } ?></div></div></div></div></div></section><?php */?></main><div class="modal fade productImageModal" id="productImageModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true"><div class="modal-dialog modal-lg" role="document"><div class="modal-content"><div class="modal-body"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><svg width="52" height="52" viewBox="0 0 52 52" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="26" cy="26" r="26" fill="white" /><path fill-rule="evenodd" clip-rule="evenodd" d="M15.3165 35.6847C15.5267 35.8964 15.8033 36.0017 16.0799 36.0017C16.3563 36.0017 16.633 35.8951 16.8447 35.6847L25.501 27.0284L34.158 35.6847C34.3684 35.8964 34.6448 36.0017 34.9215 36.0017C35.1965 36.0017 35.4729 35.8951 35.6847 35.6847C36.1066 35.2627 36.1066 34.5786 35.6847 34.1567L27.0288 25.5006L35.6847 16.8447C36.1066 16.4225 36.1066 15.7384 35.6847 15.3165C35.2627 14.8945 34.5786 14.8945 34.1567 15.3165L25.5006 23.9725L16.8447 15.3165C16.4225 14.8945 15.7384 14.8945 15.3165 15.3165C14.8945 15.7384 14.8945 16.4225 15.3165 16.8447L23.9728 25.5003L15.3165 34.1567C14.8945 34.5786 14.8945 35.2627 15.3165 35.6847Z" fill="#A8A8A8" /></svg></button> <div class="row "><div class="col-md-1"><div class="slider-nav "><div class="thumb"><img src="images/product/product1.jpg" alt="" class="img-fluid"></div><div class="thumb"><img src="images/product/product1_1.jpg" alt="" class="img-fluid"></div><div class="thumb"><img src="images/product/product1_2.jpg" alt="" class="img-fluid"></div><div class="thumb"><img src="images/product/product1_3.jpg" alt="" class="img-fluid"></div><div class="thumb"><img src="images/product/product1_4.jpg" alt="" class="img-fluid"></div></div></div><div class="col-md-11"><div class="productImageSlider slider-for"><div class="productImg"><img src="images/product/main_image.jpg" alt="" class="img-fluid"></div><div class="productImg"><img src="images/product/main_image.jpg" alt="" class="img-fluid"></div><div class="productImg"><img src="images/product/main_image.jpg" alt="" class="img-fluid"></div><div class="productImg"><img src="images/product/main_image.jpg" alt="" class="img-fluid"></div><div class="productImg"><img src="images/product/main_image.jpg" alt="" class="img-fluid"></div></div></div></div></div></div></div></div><script>
        require([ 'jquery', 'jquery/ui', 'bootstrap4', 'fabric'], function($){

        

        $( document ).ready(function() {
            var currencySymbol = '<?php echo $currencySymbol;?>';
            var canvas = new fabric.Canvas('loadingCanvas');
            
            
            var canvasWidth = canvas.getWidth();
            var canvasHeight = canvas.getHeight();
            var padding = 10;

            var topD , leftD, widthD, heightD;
            var data_top , data_left, data_width, data_height;

            var tmpTop = 96.5;
            var tmpLeft = 116;
            var tmpWidth = 163;
            var tmpHeight = 224;

            

            var HideControls = {
            'tl':true,
            'tr':false,
            'bl':true,
            'br':true,
            'ml':true,
            'mt':true,
            'mr':true,
            'mb':true,
            'mtr':true
        };

        var HideControls2 = {
                mt: false, 
             mb: false, 
             ml: false, 
             mr: false, 
             bl: false,
             br: false, 
             tl: false, 
             tr: false,
             mtr: false,
        };



        function clipRectangle(left, top, width, height){

            console.log(left);
            console.log(top);
            console.log(width);
            console.log(height);

            var clipRectangle =  new fabric.Rect({
                originX:'left',
                originY:'top',
                left:left,
                top:top,
                width:width,
                height:height,

                
                
                
                


                fill:'transparent',
                /* use transparent for no fill */
                strokeDashArray:[10, 10],
                stroke:'red',
                selectable:false,
                visible:true
            });
            return clipRectangle;
        }
   
    

      $('.dropdown-menu label').on('click',function(e){
            $('.dropdown-menu label').removeClass('selected');
            $(this).addClass('selected');
            var selecetdItemValue = $('.dropdown-menu label.selected .checkUnCheckText').text();
            console.log("$(this).text; "+selecetdItemValue);
            $(this).parents('.front-type').find('p').text(selecetdItemValue);
            $(this).parents('.back-type').find('p').text(selecetdItemValue);
        });

        
        $('.add-text').on('click','.edit-icon',function(){            
            
            console.log("tiisi is "+this.id);
            $('#fieldId').val(this.id);
            $(this).parents('.form-group').addClass('edit');
            
            
            console.log("getActiveObject "+this.id);
    
            canvas.getObjects().forEach(function(o) {
                console.log("only o "+o)
                console.log("o.id "+o)
                console.log("shshhshs "+$('#fieldId').val());
                var fieldId = $('#fieldId').val();
                
          if(o.id === fieldId) {

              canvas.setActiveObject(fieldId);
              
              canvas.getActiveObject().set("fill", color);
              canvas.getActiveObject().set("fill", color);

              console.log("if o.id "+o.id)
              
          }else{
            console.log("o.id "+o.id)
          }
          
      })
            
        });


        
        $('.add-text').on('click','.close',function(){            
            $(this).parents('.form-group').removeClass('edit');
        });

        function rgb2hex(orig){
            var rgb = orig.replace(/\s/g,'').match(/^rgba?\((\d+),(\d+),(\d+)/i);
            return (rgb && rgb.length === 4) ? "#" +
            ("0" + parseInt(rgb[1],10).toString(16)).slice(-2) +
            ("0" + parseInt(rgb[2],10).toString(16)).slice(-2) +
            ("0" + parseInt(rgb[3],10).toString(16)).slice(-2) : orig;
        }


        

        $(document).on('click','.colorWrapColors span',function(e){
            var selectTextColor = $(this).css('background-color');
            console.log(selectTextColor);
            console.log(addText);
             
             addText.set('fill', selectTextColor)
             canvas.renderAll();
        });
        
        $(document).on('click','.add-text .dropdown-menu span',function(e){
            console.log('clicked');
            $(this).parents('.dropdown-menu').find('span.selected').removeClass('selected');
            $(this).addClass('selected');
            var selecetdItemValue = $(this).text();
            console.log(selecetdItemValue);
            
            console.log(addText);
            addText.fontFamily = selecetdItemValue;
             canvas.renderAll();

            $(this).parents('.dropdown').find('.dropdown-toggle').text(selecetdItemValue);
        });

        
        
        $('.add-more').on('click',function(){
            
            var child = $('.add-text > div').length;
            console.log(child); 
            var blankField = '<div class="field-wrap"><div class="form-group d-flex align-items-center"><label for="name" class=" col-form-label mr-4 "><strong>  Design text '+(child+1)+'</strong></label> <div class="flex1 mr-3"><input type="text" class="form-control addText" id="addText_'+(child+1)+'" placeholder="Name "></div><svg class="close d-none" data-toggle="collapse" data-target="#personalize_'+(child+1)+'" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0.771341 15C0.57375 15 0.376158 14.9248 0.226034 14.7736C-0.0753447 14.4722 -0.0753447 13.9836 0.226034 13.6823L13.6826 0.226028C13.984 -0.0753428 14.4726 -0.0753428 14.774 0.226028C15.0753 0.5274 15.0753 1.016 14.774 1.31756L1.31759 14.7736C1.16634 14.9239 0.968745 15 0.771341 15Z" fill="#151515"></path><path d="M14.2288 15C14.0313 15 13.8339 14.9248 13.6835 14.7736L0.226034 1.31756C-0.0753447 1.016 -0.0753447 0.5274 0.226034 0.226028C0.527413 -0.0753428 1.01602 -0.0753428 1.31759 0.226028L14.774 13.6823C15.0753 13.9836 15.0753 14.4722 14.774 14.7736C14.6227 14.9239 14.4253 15 14.2288 15Z" fill="#151515"></path></svg><svg id="edit_icon_'+(child+1)+'" class="edit-icon" data-toggle="collapse" data-target="#personalize_'+(child+1)+'" type="button" width="18" height="16" viewBox="0 0 18 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.1843 0.369231L14.3997 2.58462C14.892 3.07692 14.892 3.81538 14.3997 4.30769L5.16893 13.5385H1.23047V9.6L10.4612 0.369231C10.9535 -0.123077 11.692 -0.123077 12.1843 0.369231ZM13.5382 3.44615L11.3228 1.23077L9.47662 3.07692L11.692 5.29231L13.5382 3.44615ZM2.46124 10.0923V12.3077H4.67662L10.8305 6.15385L8.61508 3.93846L2.46124 10.0923ZM17.2308 14.5385H0V15.7692H17.2308V14.5385Z" fill="#151515"></path></svg></div><div class="collapse personalize" id="personalize_'+(child+1)+'"><div class="colorWrap flex-column"><h6>Text Color</h6><div class="colorWrapColors d-flex align-items-center"><span class="active" style="background-color: #FFC62E;"></span> <span style="background-color: #151515"></span> <span style="background-color: #C7452A"></span> <span style="background-color: #1AAAAD"></span> <span style="background-color: #535353"></span> <span style="background-color: #C4C4C4"></span> <span style="background-color: #95C72A"></span> <span style="background-color: #871AAD"></span> <span class="colorWrapColorBorder" style="background-color: #FFFFFF"></span> <span class="active" style="background-color: #FFC62E;"></span> <span style="background-color: #151515"></span> <span style="background-color: #C7452A"></span> <span style="background-color: #1AAAAD"></span> <span style="background-color: #535353"></span> <span style="background-color: #C4C4C4"></span> <span style="background-color: #95C72A"></span> <span style="background-color: #871AAD"></span> <span class="colorWrapColorBorder" style="background-color: #FFFFFF"></span></div></div><div class="font-wrap"><h6>Font Type</h6><div class="dropdown"><button class="btn dropdown-toggle d-flex align-items-center" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> TBentham</button> <div class="dropdown-menu" aria-labelledby="dropdownMenuButton" x-placement="bottom-start" style="position: absolute; transform: translate3d(0px, 34px, 0px); top: 0px; left: 0px; will-change: transform;"><span class="">Josefin Sans</span> <span class=" selected">TBentham</span> <span class="">Cagliostro</span> <span class="">Revenue report</span> <span class="">Dhyana</span> <span class="">Eagle Lake</span> <span class="">Fira Sans</span> <span class="">Great Vibes</span></div></div></div></div></div>';
            $('.add-text').append(blankField);
        });

    $('#customiserImages').change(function(evt){
                console.log("hero "+this.files);

                var mediaUrl = "<?php echo $mediaPath; ?>tempUpload";

   
        var form_data = new FormData();

   
       var totalfiles = document.getElementById('customiserImages').files.length;
       for (var index = 0; index < totalfiles; index++) {
          form_data.append("files[]", document.getElementById('customiserImages').files[index]);
       }

   
    $.ajax({
        url: "<?php echo $block->getBaseUrl().'client/stores/upload/' ?>", 
        type: 'post',
        data: form_data,
        dataType: 'json',
        contentType: false,
        processData: false,
        success: function (response) {
            console.log(response);
            console.log(response.result);
            previewCustomisationImages(response.result);
            return false;
        }
    });
    });
   
    function previewCustomisationImages(files_list){
                
                var mediaPath= '<?php echo $mediaPath.'tempUpload/'?>';
                
                if($('.uploadedImageUrl').length > 0){
                    var initiator = (($('.uploadedImageUrl').length)+1);
                }else{
                    var initiator = 1;
                }
                console.log("initiator"+ initiator)
                filesLength = files_list.length;
                for(var i=0; i<filesLength; i++){ 

                  $("#displayCustomisedImages").append('<div class="design-box"><img src="'+mediaPath+files_list[i]+'" id="uploadedImageUrl_'+initiator+'" class="img-fluid uploadedImageUrl" data-file="'+files_list[i]+'"/></div>');

                    initiator++;
                }


                                                   

                var getFilesLength = $('.uploadedImageUrl').length;
                
                $('#designUploaded').text(getFilesLength+" design uploaded");
                return false;
            }

            $(".uploadedImageUrl").live("click", function(event){
                if($('#firstCustomisationStart').val() == ""){
                    $('#firstCustomisationStart').val("true")
                }if($('#secondImageSelected').val() != ""){
                    $('#secondCustomisationStart').val("true")
                }
        console.log( this.id );
        var uploadedImageUrl = ( $("#"+this.id).attr('src'));
        console.log(uploadedImageUrl);
        fabric.Image.fromURL(uploadedImageUrl, function(oImg) {
                var img1 = oImg.set({ left: 116, top: 96.5});
                    canvas.add(img1);
                    canvas.renderAll();
                });
        
    });


function addDeleteBtn(x, y){
    $(".deleteBtn").remove(); 
    var btnLeft = x-10;
    var btnTop = y-10;
    var deleteBtn = '<img src="<?php echo $mediaPath?>/misc/trash_bin.ico" class="deleteBtn" style="position:absolute;top:'+btnTop+'px;left:'+btnLeft+'px;cursor:pointer;width:20px;height:20px;"/>';
    $(".canvas-container").append(deleteBtn);
}

canvas.on('object:selected',function(e){
        addDeleteBtn(e.target.oCoords.tr.x, e.target.oCoords.tr.y);
});

canvas.on('mouse:down',function(e){
    if(!canvas.getActiveObject())
    {
        $(".deleteBtn").remove(); 
    }
});

canvas.on('object:modified',function(e){
    addDeleteBtn(e.target.oCoords.tr.x, e.target.oCoords.tr.y);
});

canvas.on('object:scaling',function(e){
    $(".deleteBtn").remove(); 
});
canvas.on('object:moving',function(e){
    $(".deleteBtn").remove(); 
});
canvas.on('object:rotating',function(e){
    $(".deleteBtn").remove(); 
});
$(document).on('click',".deleteBtn",function(){
    if(canvas.getActiveObject())
    {
        canvas.remove(canvas.getActiveObject());
        $(".deleteBtn").remove();
    }
});


















   
   

    
  function renderIcon(ctx, left, top, styleOverride, fabricObject) {
    var size = this.cornerSize;
    ctx.save();
    ctx.translate(left, top);
    ctx.rotate(fabric.util.degreesToRadians(fabricObject.angle));
    ctx.drawImage(img, -size/2, -size/2, size, size);
    ctx.restore();
  }

 ?>/storeProfileCustomizeDesignImg.png';


loadCanvas(); 

function loadCanvas(url) {
    if (url != undefined) {
        var canvasImageBackground = url;
    } else {
        var canvasImageBackground = $('#loadingCanvas').attr('data-image');
    }
    
        console.log(canvasImageBackground);
        var bgImg = new Image();
        bgImg.src = canvasImageBackground;
        $(bgImg).on('load',function(){
            var bgImgWidth = bgImg.width;
            var bgImgHeight = bgImg.height;
            $('#bgImgWidth').val(bgImgWidth);
            $('#bgImgHeight').val(bgImgHeight);
            console.log("bgImgWidth "+bgImgWidth);
            console.log("bgImgHeight "+bgImgHeight);
            
            
        });

        setTimeout( function () {


    var getImgWidth= $("#bgImgWidth").val();
    var getImgHeight= $("#bgImgHeight").val();

    console.log("getImgWidth "+getImgWidth);
    console.log("getImgHeight "+getImgHeight);

    var getPosition = getPositions(getImgWidth, getImgHeight);

    console.log("getPositions.top "+getPosition.top);
    console.log("getPositions.left "+getPosition.left);
    canvas.clear();
    canvas.setBackgroundImage(canvasImageBackground, canvas.renderAll.bind(canvas), {
    top: getPosition.top,
    left: getPosition.left,
    originX: 'left',
    originY: 'top',
    scaleX: getPosition.scaleFactor,
    scaleY: getPosition.scaleFactor
    });
    var rectangle = clipRectangle(tmpLeft, tmpTop, tmpWidth, tmpHeight);
    canvas.add(rectangle);

  }, 1000);
}

$(document).ready(function() {

$(".cimageUrl").click(function(){
        var url = $(this).attr('data-image');
        var html = "";
        loadCanvas(url);
        $('.sideImagesCode').html('<img src="'+url+'">');
        
        $.ajax({
                url: "<?php echo $block->getBaseUrl().'tier/bundle/' ?>", 
                type: 'POST',
                data: {type:'allprice',pid:$(this).attr('data-id')},
                success: function (response) {
                        
                        $.each(response, function(index) {
                           html += '<tr>';
                           price     = response[index].price;
                           qty       = response[index].qty;
                           discount  = response[index].discount;
                           maxqty = (typeof response[index+1] == 'undefined')?'+':response[index+1].qty-1;
                           html +='<td>'+qty+'</td>';
                           html +='<td>'+maxqty+'</td>';
                           html +='<td>'+parseFloat(price)+'</td>';
                           if(discount > 0){html +='<td>'+discount+'%</td>';}
                           html += '</tr>';

                        });
                        
                        $('#bundle-price').html(html);
                }
        });
    });
    
});


        $('.sideImages').on("click", function(){            
            canvas.clear();
            setTimeout( function (id) {
                var getImgId = id;
                console.log("imgid"+getImgId);
                var newCanvasImageBackground = $('#'+getImgId).attr('data-side');
                data_top = $('#'+getImgId).attr('data-top');
                data_left = $('#'+getImgId).attr('data-left');
                data_sides = $('#'+getImgId).attr('data-sides');
                data_width = $('#'+getImgId).attr('data-width');
                data_height = $('#'+getImgId).attr('data-height');

                var img = new Image();
                img.onload = function() {

                    $('#bgImgWidth').val(this.width);
                    $('#bgImgHeight').val(this.height);

                    $('#data_top').val(data_top);
                    $('#data_left').val(data_left);
                    $('#data_width').val(data_width);
                    $('#data_height').val(data_height);

                    var newGetImgWidth= $("#bgImgWidth").val();
                    var newGetImgHeight= $("#bgImgHeight").val();
                    var newGetPosition = getPositions(newGetImgWidth, newGetImgHeight);

                    canvas.setBackgroundImage(newCanvasImageBackground, canvas.renderAll.bind(canvas), {
                        top: newGetPosition.top,
                        left: newGetPosition.left,
                        originX: 'left',
                        originY: 'top',
                        scaleX: newGetPosition.scaleFactor,
                        scaleY: newGetPosition.scaleFactor
                    });

                    var rectangle = clipRectangle(data_left, data_top, data_width, data_height);
                    canvas.add(rectangle);
                    canvas.renderAll();

                }
                img.src = newCanvasImageBackground;

            }, 1000, this.id);
            constrainToBounds();
            
        })
        

        $(".clipartClasses").live("click", function(event){
            if($('#firstCustomisationStart').val() == ""){
                $('#firstCustomisationStart').val("true")
            }
            if($('#secondImageSelected').val() != ""){
                $('#secondCustomisationStart').val("true")
            }
            setTimeout( function (id) {
                var uploadedImageUrl = ( $("#"+id).attr('src'));
                topD = $('#data_top').val();
                leftD = $('#data_left').val();
                widthD = $('#data_width').val();
                heightD = $('#data_height').val();

                fabric.Image.fromURL(uploadedImageUrl, function(oImg) {
                var img1 = oImg.set({ left: 116, top: 96.5});
                    canvas.add(img1);
                    canvas.renderAll();
                });
            }, 1000, this.id);
        });


        
        var addText;
        $(document).on('keypress', '.addText', function(e){
            if($('#firstCustomisationStart').val() == ""){
                    $('#firstCustomisationStart').val("true")
                }if($('#secondImageSelected').val() != ""){
                    $('#secondCustomisationStart').val("true")
                }
            if(e.keyCode==13){
            var text = this.value; 
            console.log("this.value_"+this.value)
            console.log("this.id_"+this.id)
            var res = this.id.split("_");
            
            var id = "edit_icon_"+res[1]; 
            
            addText = new fabric.Text(text, { 
                fontFamily: 'Arial', 
                left: 100, 
                top: 100,
                fill:'#000',
                id:id
            });

            canvas.add(addText);
            console.log(addText.fontFamily, addText.fill);
        }
    });
        
        $('.frontCustomisationtype').on("click", function(){
            var getValue= $(this).val();
            addFrontPrice('frontprice');
            var productPrice = '<?php $totalp = (isset($currentProduct))?$currentProduct->getPrice():$block->getPrice();echo number_format($totalP, 2); ?>';
            if(($('#firstCustomisationStart').val() != "") && ($('#firstCustomisationStart').val()=="")){
                    getValue = 0;
                    return false;
            }else{
                getValue = 0;
                    return false;
            }
            console.log("getValue"+getValue);
            console.log("productPrice"+productPrice);
            if($('#updatedPrice').val() == ""){
                var updatedValue = ((parseInt(getValue))+(parseInt(productPrice)));
            }else{
                var getupdatedPrice = $('#updatedPrice').val();
                var updatedValue = ((parseInt(getValue))+(parseInt(getupdatedPrice)));
            }

            $('#updatedPrice').val(updatedValue);
            $('.actual').text(currencySymbol+updatedValue);
        })

        $('.backCustomisationtype').on("click", function(){
            var getValue= $(this).val();
            addFrontPrice('backendprice');
            var productPrice = "<?php echo number_format($block->getPrice(), 2); ?>";
            

            if($('#updatedPrice').val() == ""){
                var updatedValue = ((parseInt(getValue))+(parseInt(productPrice)));
            }else{
                var getupdatedPrice = $('#updatedPrice').val();
                var updatedValue = ((parseInt(getValue))+(parseInt(getupdatedPrice)));
            }
            $('#updatedPrice').val(updatedValue);
            $('.actual').text(currencySymbol+updatedValue);
        })
        

        function getPositions(imgWidth, imgHeight){

                console.log(imgWidth);
                console.log(imgHeight);
                var canvasAspect = canvasWidth / canvasHeight;
                var imgAspect = imgWidth / imgHeight;
                var left, top, scaleFactor;

                if (canvasAspect >= imgAspect) {
                    var scaleFactor = canvasWidth / imgWidth;
                    left = 0;
                    top = ((imgHeight * scaleFactor) - canvasHeight) / 2;
                } else {
                    var scaleFactor = canvasHeight / imgHeight;
                    top = 0;
                    left = ((imgWidth * scaleFactor) - canvasWidth) / 2;
                }

                var dimensions = new Object();
                dimensions['left'] = left;
                dimensions['top'] = top;
                dimensions['scaleFactor'] = scaleFactor;

                console.log(dimensions);
                return dimensions;
            }


    constrainToBounds = function (activeObject) {
        if(activeObject)
        {
            var angle = activeObject.getAngle() * Math.PI/180,
            aspectRatio = activeObject.width/activeObject.height,
            boundWidth = getBoundWidth(activeObject),
            boundHeight = getBoundHeight(activeObject);
            if(boundWidth > bounds.width) {
                boundWidth = bounds.width;
                var targetWidth = aspectRatio * boundWidth/(aspectRatio * Math.abs(Math.cos(angle)) + Math.abs(Math.sin(angle)));
                    activeObject.setScaleX(targetWidth/activeObject.width);
                    activeObject.setScaleY(targetWidth/activeObject.width);
                    boundHeight = getBoundHeight(activeObject);
                }
                if(boundHeight > bounds.height) {
                    boundHeight = bounds.height;
                    var targetHeight = boundHeight/(aspectRatio * Math.abs(Math.sin(angle)) + Math.abs(Math.cos(angle)));
                    activeObject.setScaleX(targetHeight/activeObject.height);
                    activeObject.setScaleY(targetHeight/activeObject.height);
                    boundWidth = getBoundWidth(activeObject);
                }
                
                if(activeObject.getLeft() < bounds.x + boundWidth/2)
                    activeObject.setLeft(bounds.x + boundWidth/2);
                if(activeObject.getLeft() > (bounds.x + bounds.width - boundWidth/2))
                    activeObject.setLeft(bounds.x + bounds.width - boundWidth/2);
                if(activeObject.getTop() < bounds.y + boundHeight/2)
                    activeObject.setTop(bounds.y + boundHeight/2);
                if(activeObject.getTop() > (bounds.y + bounds.height - boundHeight/2))
                    activeObject.setTop(bounds.y + bounds.height - boundHeight/2);
            }
    }

            $('#pincodeCheckerBtn').click(function(){
                
                var pincode = $('#pincodeChecker').val();
                
                $.ajax({
                    url: "<?php echo $block->getBaseUrl().'pincode/check/' ?>", 
                    type: 'POST',
                    data: {pincode:pincode},
                    success: function (response) {
                        console.log(response);
                        if(response == true){
                            $('#pincodeCheckerResult').text("This location is available for delivery.")
                        }else{
                            $('#pincodeCheckerResult').text("Sorry, this product cannot be delivered to this location.")
                        }

                        
                        return false;
                    }
                }); 
            })



$( document ).ready(function() {
      
    addFrontPrice();
});

function addFrontPrice (type) {
    var previousval = 0;
    var previousbprice = 0;
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
        
    
    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    
        
    
}

$("#addToCart").submit(function(e){
    count = 0;
    object = [];
    var checkQty = "<?php echo ($checkQty);?>"; 
    
    
        
       $('.checkSizeBox').each(function() {
        
        data = {};
        if ($(this).is(":checked")) {
            
            attrid = $(this).attr('id');
            id = attrid.split('_');
            data.size = $("tierPrice_"+id[1]).val();
            object.push(data);
            count++;
        }

    }); 
        console.log("count"+count);
        
        if (count<=0) {
            alert("You have not selected any quantities to add to the cart.");
            e.preventDefault();
            return false;
        }
    
    
    console.log(object);
    
    
});

$('.tierPriceChecker').keyup(function(){
        totalQty = 0;
        
        attrid = $(this).attr('id');
        gid = attrid.split('_');

        $( ".tierPriceChecker" ).each(function( index ) {
            checkVal = $(this).val();
            if (checkVal) {
                totalQty+=parseInt(checkVal); 
            }
        });
        
        frontprice = $("#frontPrice").val();
        backendPrice = $("#backendPrice").val();
      
        if (totalQty) {
            $(this).closest('td').prev().find('[type=checkbox]').prop('checked', true);
             var pid = $('#currentProductId').val();
           
            $.ajax({
                url: "<?php echo $block->getBaseUrl().'tier/bundle/' ?>", 
                type: 'POST',
                data: {qty:totalQty,pid:pid,type:'check'},
                success: function (response) {
                           
                           var totalPrice = [];
                            
                           if(response.length == 0){
                            actualPrice = $("#tierPriceOld_"+gid[1]).val()
                            price = actualPrice * totalQty;
                           }else{
                               price = response[0].price;
                           }
                           
                           $( ".tierPriceChecker" ).each(function( index ) {
                                checkVal = $(this).val();
                                oldprice = 0;
                                if (checkVal) {

                                    
                                    attrid = $(this).attr('id');
                                    id = attrid.split('_');
                                    
                                    
                                    
                                        oldprice = parseInt($("#tierPriceOld_"+id[1]).val());

                                    
                                    $('#tierPrice_'+id[1]).val('$'+price);
                                    if ($('#tierPriceChecker_'+id[1]).val() > 0) {
                                        $(this).closest('td').prev().find('[type=checkbox]').prop('checked', true);
                                    } else{
                                        $('#tierPrice_'+id[1]).val('$'+oldprice);
                                        $(this).closest('td').prev().find('[type=checkbox]').prop('checked', false);
                                    }
                                 }
                            });
                            
                            $('.checkSizeBox').each(function() {
                                if ($(this).is(":checked")) {
                                    attrid = $(this).attr('id');
                                    id = attrid.split('_');
                                    actualPrice = ($('#tierPrice_'+id[1]).val()).split('$');
                                    if((actualPrice[1] !="") && (actualPrice[1] != 0)){
                                        totalPrice.push(actualPrice[1]);
                                    }
                                }
                            });
                            var total = 0;
                            $.each(totalPrice,function() {
                                total += parseFloat(totalPrice);
                            });
                            total = total*totalQty;
                            $('#updatedPrice').val(total);
                            $('#newPrice').val(total);
                            $('.actual').text('$ '+total);

                }
            });
        }
        $( ".tierPriceChecker" ).each(function( index ) {
                            checkVal = $(this).val();
                            if (!checkVal || checkVal<=0) {
                                attrid = $(this).attr('id');
                                id = attrid.split('_');
                                
                                
                                
                                    oldprice = parseInt($("#tierPriceOld_"+id[1]).val());

                                
                               
                                $('#tierPrice_'+id[1]).val('$'+oldprice);
                                $(this).closest('td').prev().find('[type=checkbox]').prop('checked', false);
                            } 
        });
        
})


$('.addedToWishList').on("click", function(){
    var data_id = $(this).attr('data-id');
    var split = data_id.split('-');
    cust_id = split[0];
    p_id = split[1];
    $.ajax({
        url: "<?php echo $block->getBaseUrl().'removeitem/wishlist/' ?>", 
        type: 'post',
        data: {cust_id:cust_id,p_id:p_id},
        dataType: 'json',
        success: function (response) {
            location.reload();
        }
    });
});




















function clamp(number, min_number, max_number) {
  return Math.min(Math.max(number, min_number), max_number);
};       

var master = clipRectangle(116, 96.5, 163, 224);





















canvas.on("object:moving", function(e) {
    var obj = e.target;
    
    obj.setCoords();

    if(obj.getBoundingRect().top < master.top){ 
        console.log("Top boundary");
    obj.top = master.top;
}
master.bottom = master.top+master.height;
if(obj.getBoundingRect().top+obj.getBoundingRect().height > master.top+master.height){  
    obj.top = (master.bottom-obj.height);
    console.log("bottom boundary");
    
    
}
if(obj.getBoundingRect().left < master.left){  
    console.log("left boundary");
    obj.left = master.left;
}
master.right = master.left+master.width;
if(obj.getBoundingRect().left+obj.getBoundingRect().width > master.width){  
    
    console.log("llll "+(obj.getBoundingRect().left+obj.getBoundingRect().width));
    console.log("master.width "+master.width);
    obj.left = master.right-obj.width;    
    console.log("obj.left."+obj.left);
}

 });

























    var left1 = 116;
    var top1 = 96.5;
    var scale1x = 116;    
    var scale1y = 96.5;    
    var width1 = 163;    
    var height1 = 224;

  canvas.on('object:scaling', function (e){
    var obj = e.target;
    obj.setCoords();
    var brNew = obj.getBoundingRect();
    
    if (((brNew.width) >= master.width) || ((brNew.height) >= master.height)) {
        console.log("master.width "+(master.width));
        console.log("master.height "+(master.height));
        console.log("brNew.width+brNew.left "+(brNew.width+brNew.left));
        console.log("brNew.width "+(brNew.width));
        console.log("brNew.height+brNew.top "+(brNew.height+brNew.top));
        console.log("brNew.height "+(brNew.height));

        
    obj.left = left1;
    obj.top=top1;
    obj.scaleX=scale1x;
    obj.scaleY=scale1y;
    obj.width=width1;
    obj.height=height1;
  }
    else{    
      left1 =obj.left;
      top1 =obj.top;
      scale1x = obj.scaleX;
      scale1y=obj.scaleY;
      width1=obj.width;
      height1=obj.height;
    }
 });
















            

        

    });

});</script>