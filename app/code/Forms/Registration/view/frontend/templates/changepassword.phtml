<style type="text/css">
.icon{
    position: absolute !important;
    top: 50%;
    right:50px;
    transform: translatey(-50%);
    cursor: pointer;
​​​​​​​​}
.change-password-form .form-group .info:hover ~ .icon-detail {
  display: inline-block;
}
.change-password-form .form-group .icon-detail {
  display: none;
  position: absolute;
  bottom: 50px;
  right: -90px;
  background: #fff;
  border: 1px solid #A8A8A8;
  border-radius: 10px;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
  width: 200px;
  font-size: 13px;
  padding: 20px 10px;
  z-index: 1;
  text-align:center;
}
</style>
 <!-- MainBodyWrap -->
 <main class="main">
 <div class="loading-mask" style="display:none;" data-role="loader" ><div class="loader">
    <img alt="Loading..." src="<?php echo $block->getViewFileUrl('images/loader-2.gif') ?>"><p>Please wait...</p></div></div>
        <section class="manageAccount manageAccountPassword">
            <div class="container addPadding">
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="#">Home</a></li>
                        <li class="breadcrumb-item"><a href="#">Manage account</a></li>
                        <li class="breadcrumb-item active" aria-current="page">Password</li>
                    </ol>
                </nav>
                <div class="manageAccountTop">
                    <h4>Manage account</h4>
                </div>
                <div class="manageAccountRow">
                    <div class="manageAccountLeftBar">
                        <ul>
                        <li><a href="<?php echo $block->getBaseUrl(); ?>customer/account/edit">Profile</a></li>
                            <li><a href="<?php echo $block->getBaseUrl(); ?>customer/account/password" class="active">Password</a></li>
                            <li><a href="<?php echo $block->getBaseUrl(); ?>sales/order/history" >Orders</a></li>
                            <!-- <li><a href="#">Your customized design</a></li>
                            <li><a href="#">Notification settings</a></li> -->
                        </ul>
                    </div>
                    <div class="manageAccountRightBar">
                        <div class="manageAccountRightBarTop">
                            <h4>Update password</h4>
                        </div>
                        <!-- <form action="<?= $block->escapeUrl($block->getUrl('profile/account/change')) ?>"
                         method="post" id="form-validate"
                         enctype="multipart/form-data"
                         data-hasrequired="<?= $block->escapeHtmlAttr(__('* Required Fields')) ?>"
                           autocomplete="off"> -->
                           <div class="response-msg" style="width:auto;"></div>
                           <form class="change-password-form" method="POST">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <input type="password" class="form-control" placeholder="Password"
                                            name="current_password" id="current_password" />
                                    </div>
                                    <div class="form-group">
                                        <input type="password" class="form-control" placeholder="New password" name="new_password" id="new_password"/>
                                        <span class="passwordInfoIcon">
                                        <svg class="icon passHide" width="19" height="15" viewBox="0 0 19 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path fill-rule="evenodd" clip-rule="evenodd" d="M13.6202 0.748155C13.7572 0.508396 13.6739 0.202969 13.4341 0.065964C13.1944 -0.071041 12.8889 0.0122574 12.7519 0.252016L12.1114 1.37299C11.1679 1.01323 10.2163 0.817895 9.27273 0.817895C7.10426 0.817895 4.89291 1.84971 2.83653 3.53793C1.3451 4.76245 0 6.32852 0 6.81789C0 7.30727 1.34521 8.87328 2.83653 10.0979C3.85819 10.9366 4.91805 11.6134 5.99192 12.082L5.24807 13.3838C5.11106 13.6235 5.19436 13.929 5.43412 14.066C5.67388 14.203 5.97931 14.1197 6.11631 13.8799L6.93945 12.4394C7.71663 12.686 8.4974 12.8179 9.27273 12.8179C11.4412 12.8179 13.6525 11.7861 15.7089 10.0979C17.2004 8.87334 18.5455 7.30727 18.5455 6.81789C18.5455 6.32852 17.2003 4.76251 15.7089 3.53793C14.8395 2.82408 13.9423 2.22761 13.0323 1.77688L13.6202 0.748155ZM11.6806 2.12681C10.8715 1.83316 10.0638 1.67522 9.27273 1.67522C7.32944 1.67522 5.28642 2.62821 3.366 4.20478C2.64444 4.79778 1.98454 5.44625 1.46688 6.04888C1.25428 6.29636 1.07804 6.52216 0.957135 6.69975C0.943809 6.71927 0.931215 6.73856 0.919597 6.75635C0.903664 6.78076 0.889566 6.80235 0.877928 6.81787C0.889566 6.83339 0.903665 6.85498 0.919598 6.87939C0.931216 6.89718 0.943809 6.91647 0.957135 6.93599C1.07805 7.11357 1.2543 7.33936 1.46688 7.58686C1.98454 8.18951 2.64444 8.83796 3.366 9.43096C4.36124 10.248 5.38938 10.8975 6.4195 11.3338L7.37883 9.65494C6.48663 9.03793 5.90046 7.99731 5.90046 6.81789C5.90046 4.92475 7.41074 3.38921 9.27273 3.38921C9.80611 3.38921 10.3106 3.51521 10.7591 3.73953L11.6806 2.12681ZM11.5803 4.31794L12.607 2.52116C13.4756 2.94461 14.3392 3.51502 15.1795 4.20478C15.901 4.79778 16.5609 5.44623 17.0786 6.04888C17.2912 6.29638 17.4674 6.52217 17.5883 6.69975C17.6016 6.71927 17.6142 6.73855 17.6259 6.75635C17.6418 6.78076 17.6559 6.80235 17.6675 6.81787C17.6559 6.83339 17.6418 6.85498 17.6259 6.87939C17.6142 6.89719 17.6016 6.91647 17.5883 6.93599C17.4674 7.11357 17.2912 7.33938 17.0786 7.58686C16.5609 8.18949 15.901 8.83796 15.1795 9.43096C13.259 11.0075 11.2161 11.9605 9.27273 11.9605C8.64819 11.9605 8.01336 11.8621 7.3756 11.6762L8.27901 10.0952C8.59316 10.1936 8.92688 10.2466 9.27273 10.2466C11.1347 10.2466 12.645 8.71104 12.645 6.81789C12.645 5.83222 12.2356 4.94349 11.5803 4.31794ZM10.334 4.48336C10.0113 4.33139 9.65172 4.24658 9.27273 4.24658C7.87626 4.24658 6.74373 5.39806 6.74373 6.81789C6.74373 7.68088 7.16212 8.44473 7.80386 8.91114L10.334 4.48336ZM8.71792 9.32711L11.1416 5.08568C11.5516 5.54273 11.8017 6.15068 11.8017 6.81789C11.8017 8.23773 10.6692 9.3892 9.27273 9.3892C9.08214 9.3892 8.89647 9.36776 8.71792 9.32711Z" fill="#A8A8A8"/>
                                        </svg>
                                        <svg class="icon passShow d-none" width="19" height="13" viewBox="0 0 19 13" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M9.27273 12.8179C7.10406 12.8179 4.89291 11.7862 2.83653 10.0979C1.34521 8.87328 0 7.30727 0 6.81789C0 6.32852 1.3451 4.76245 2.83653 3.53793C4.89291 1.84971 7.10426 0.817894 9.27273 0.817894C11.4412 0.817894 13.6525 1.84963 15.7089 3.53793C17.2003 4.76251 18.5455 6.32852 18.5455 6.81789C18.5455 7.30727 17.2004 8.87334 15.7089 10.0979C13.6525 11.7861 11.4412 12.8179 9.27273 12.8179ZM9.27273 11.9605C11.2161 11.9605 13.259 11.0075 15.1795 9.43096C15.901 8.83796 16.5609 8.18949 17.0786 7.58686C17.2912 7.33938 17.4674 7.11357 17.5883 6.93599C17.6547 6.83876 17.7029 6.74716 17.7029 6.81787C17.7029 6.88858 17.6547 6.79698 17.5883 6.69975C17.4674 6.52217 17.2912 6.29638 17.0786 6.04888C16.5609 5.44622 15.901 4.79778 15.1795 4.20478C13.259 2.62823 11.216 1.67522 9.27273 1.67522C7.32945 1.67522 5.28642 2.62821 3.366 4.20478C2.64444 4.79778 1.98454 5.44625 1.46688 6.04888C1.25428 6.29636 1.07804 6.52216 0.957135 6.69975C0.890748 6.79698 0.842539 6.88858 0.842539 6.81787C0.842539 6.74716 0.890748 6.83876 0.957135 6.93599C1.07805 7.11357 1.2543 7.33936 1.46688 7.58686C1.98454 8.18951 2.64444 8.83796 3.366 9.43096C5.28646 11.0075 7.32945 11.9605 9.27273 11.9605V11.9605ZM9.27273 10.2466C7.41076 10.2466 5.90046 8.71104 5.90046 6.81789C5.90046 4.92475 7.41074 3.38921 9.27273 3.38921C11.1347 3.38921 12.645 4.92475 12.645 6.81789C12.645 8.71104 11.1347 10.2466 9.27273 10.2466V10.2466ZM9.27273 9.38921C10.6692 9.38921 11.8017 8.23773 11.8017 6.81789C11.8017 5.39806 10.6692 4.24658 9.27273 4.24658C7.87626 4.24658 6.74373 5.39806 6.74373 6.81789C6.74373 8.23773 7.87626 9.38921 9.27273 9.38921Z" fill="#A8A8A8"/>
                                        </svg>
                                        <svg class="info" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M8 0C3.58217 0 0 3.58182 0 7.99965C0 12.4178 3.58217 16 8 16C12.4178 16 16 12.4178 16 7.99965C16 3.58182 12.4182 0 8 0ZM9.22293 12.3679C9.22293 13.0387 8.67362 13.5824 8.00349 13.5824C7.33301 13.5824 6.78406 13.0387 6.78406 12.3679V7.05435C6.78406 6.38387 7.33301 5.84015 8.00349 5.84015C8.67362 5.84015 9.22293 6.38352 9.22293 7.05435V12.3679ZM8 4.83688C7.26003 4.83688 6.66009 4.23694 6.66009 3.49732C6.66009 2.757 7.26003 2.15775 8 2.15775C8.73962 2.15775 9.33991 2.757 9.33991 3.49732C9.33991 4.23694 8.73962 4.83688 8 4.83688Z" fill="#A8A8A8"/>
                                        </svg>
                                        <div class="icon-detail">
                                            Password must contain at least one number and one uppercase and lowercase letter and special character, and at least 8 or more characters.                                    
                                        </div>

                                        <!-- <svg class="icon passShow d-none" width="19" height="13" viewBox="0 0 19 13" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M9.27273 12.8179C7.10406 12.8179 4.89291 11.7862 2.83653 10.0979C1.34521 8.87328 0 7.30727 0 6.81789C0 6.32852 1.3451 4.76245 2.83653 3.53793C4.89291 1.84971 7.10426 0.817894 9.27273 0.817894C11.4412 0.817894 13.6525 1.84963 15.7089 3.53793C17.2003 4.76251 18.5455 6.32852 18.5455 6.81789C18.5455 7.30727 17.2004 8.87334 15.7089 10.0979C13.6525 11.7861 11.4412 12.8179 9.27273 12.8179ZM9.27273 11.9605C11.2161 11.9605 13.259 11.0075 15.1795 9.43096C15.901 8.83796 16.5609 8.18949 17.0786 7.58686C17.2912 7.33938 17.4674 7.11357 17.5883 6.93599C17.6547 6.83876 17.7029 6.74716 17.7029 6.81787C17.7029 6.88858 17.6547 6.79698 17.5883 6.69975C17.4674 6.52217 17.2912 6.29638 17.0786 6.04888C16.5609 5.44622 15.901 4.79778 15.1795 4.20478C13.259 2.62823 11.216 1.67522 9.27273 1.67522C7.32945 1.67522 5.28642 2.62821 3.366 4.20478C2.64444 4.79778 1.98454 5.44625 1.46688 6.04888C1.25428 6.29636 1.07804 6.52216 0.957135 6.69975C0.890748 6.79698 0.842539 6.88858 0.842539 6.81787C0.842539 6.74716 0.890748 6.83876 0.957135 6.93599C1.07805 7.11357 1.2543 7.33936 1.46688 7.58686C1.98454 8.18951 2.64444 8.83796 3.366 9.43096C5.28646 11.0075 7.32945 11.9605 9.27273 11.9605V11.9605ZM9.27273 10.2466C7.41076 10.2466 5.90046 8.71104 5.90046 6.81789C5.90046 4.92475 7.41074 3.38921 9.27273 3.38921C11.1347 3.38921 12.645 4.92475 12.645 6.81789C12.645 8.71104 11.1347 10.2466 9.27273 10.2466V10.2466ZM9.27273 9.38921C10.6692 9.38921 11.8017 8.23773 11.8017 6.81789C11.8017 5.39806 10.6692 4.24658 9.27273 4.24658C7.87626 4.24658 6.74373 5.39806 6.74373 6.81789C6.74373 8.23773 7.87626 9.38921 9.27273 9.38921Z" fill="#A8A8A8"/>
                                        </svg>                          

                                            <svg class="info" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M8 0C3.58217 0 0 3.58182 0 7.99965C0 12.4178 3.58217 16 8 16C12.4178 16 16 12.4178 16 7.99965C16 3.58182 12.4182 0 8 0ZM9.22293 12.3679C9.22293 13.0387 8.67362 13.5824 8.00349 13.5824C7.33301 13.5824 6.78406 13.0387 6.78406 12.3679V7.05435C6.78406 6.38387 7.33301 5.84015 8.00349 5.84015C8.67362 5.84015 9.22293 6.38352 9.22293 7.05435V12.3679ZM8 4.83688C7.26003 4.83688 6.66009 4.23694 6.66009 3.49732C6.66009 2.757 7.26003 2.15775 8 2.15775C8.73962 2.15775 9.33991 2.757 9.33991 3.49732C9.33991 4.23694 8.73962 4.83688 8 4.83688Z" fill="#A8A8A8"/>
                                            </svg>
                                            <div class="icon-detail">
                                             Password must contain at least one number and one uppercase and lowercase letter and special character, and at least 8 or more characters.
                                            </div> -->
                                        </span>
                                    </div>
                                    <div class="form-group">
                                        <input type="password" class="form-control" placeholder="Confirm password" name="confirm_password" id="confirm_password" />
                                    </div>
                                </div>
                            </div>
                            <div class="manageAccountRightBarBtn d-flex align-items-center">
                                <button class="btn btn-primary d-flex align-items-center">
                                    <span>Save</span>
                                    <svg width="24" height="13" viewBox="0 0 24 13" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <path
                                            d="M23.725 5.83638C23.7248 5.8361 23.7245 5.83577 23.7242 5.83549L18.8256 0.960497C18.4586 0.595294 17.865 0.596653 17.4997 0.963684C17.1345 1.33067 17.1359 1.92425 17.5028 2.28949L20.7918 5.56249L0.9375 5.56249C0.419719 5.56249 0 5.98221 0 6.49999C0 7.01777 0.419719 7.43749 0.9375 7.43749L20.7917 7.43749L17.5029 10.7105C17.1359 11.0757 17.1345 11.6693 17.4998 12.0363C17.8651 12.4034 18.4587 12.4046 18.8256 12.0395L23.7242 7.16449C23.7245 7.16421 23.7248 7.16388 23.7251 7.1636C24.0923 6.79713 24.0911 6.20163 23.725 5.83638Z"
                                            fill="white" />
                                    </svg>
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script type="text/javascript">
        require(['jquery', 'bootstrap4'], function($) {
            $('.change-password-form').submit(function(e){
                $(".loading-mask").show();
                var passwordVal = $('#current_password').val();
                  var regularExp = /^(?=.*\d)(?=.*[!@#$%^&*])(?=.*[a-z])(?=.*[A-Z]).{8,}$/;
                  if(!regularExp.test(passwordVal)){
                    $('.response-msg').html("<div class='notify error'><h6>Current password must contain at least one number and one uppercase and lowercase letter and special character, and at least 8 or more characters.</h6></div>");
                    $(".loading-mask").hide();
                    return false;
                  }

                var passwordVal = $('#new_password').val();
                  var regularExp = /^(?=.*\d)(?=.*[!@#$%^&*])(?=.*[a-z])(?=.*[A-Z]).{8,}$/;
                  if(!regularExp.test(passwordVal)){
                    $('.response-msg').html("<div class='notify error' ><h6>New password must contain at least one number and one uppercase and lowercase letter and special character, and at least 8 or more characters.</h6></div>");
                    $(".loading-mask").hide();
                    return false;
                  }


                // if(($('#new_password').val()) != ($('#confirm_password').val())) {
                //   $('.response-msg').html("<div class='notify error' style='width:auto;'><h6>Password and confirm password should be same.</h6></div>");
                //   return false;

                // }
                var Url = "<?php echo $block->getUrl('profile/account/change') ?>";
                var formData = getFormData($(this));
                $.ajax({
                    type: "POST",
                    url: Url,
                    data: formData,
                    dataType: "json",
                    success: function(data) {
                        showResponse(data);
                        if(data.errors) {
                            // loginButton.text(loginText);
                            // loginButton.removeAttr('disabled');
                            $(".loading-mask").hide();

                        } else {
                             window.location.href = "<?php echo $this->getUrl().'customer/account/password'?>";
                        }

                    }
                });
                return false;
            });
            
            


            function getFormData(formElem){
                var unindexed_array = formElem.serializeArray();
                var indexed_array = {};

                jQuery.map(unindexed_array, function(n, i){
                    indexed_array[n['name']] = n['value'];
                });

                return indexed_array;
            }

            function showResponse(data) {
                if(data.errors) {
                    $('.response-msg').html("<div class='notify error' style='width:auto;'><h6>"+data.message+"</h6></div>");
                } else {
                    $('.response-msg').html("<div class='notify success' style='width:auto;'><h6>"+data.message+"</h6></div>");
                }
                setTimeout(function(){ $('.response-msg').html(null); }, 5000);
            }

            // showPassword
       $('.passHide').on('click', function(){
        $(this).addClass('d-none');
        $('.passShow').removeClass('d-none');
        //$(this).parent('.form-group').find('input').attr('type','text');
        $("#new_password").attr('type','text');

       });
       // Hidepassword
      $('.passShow').on('click', function(){
        $(this).addClass('d-none');
        $('.passHide').removeClass('d-none');
        //$(this).parent('.form-group').find('input').attr('type','password');
        $("#new_password").attr('type','password');
       })

 
   });
    </script>